{"version":3,"file":"ajaxer.min.js","sources":["../lib/utils.js","../lib/constructURL.js","../lib/Ajaxer.js","../lib/parseHeaders.js","../lib/transformData.js","../browser.js"],"sourcesContent":["const {\n  hasOwnProperty,\n  toString\n} = {};\nconst whiteSpace = /^\\s*|\\s*$/g;\nconst primitive = /^(number|string|boolean|symbol|undefined)$/;\n\nexport function toStringTag(value) {\n  return toString\n    .call(value)\n    .slice(8, -1);\n}\n\nexport const isArray = Array.isArray || ((value) => (\n  toStringTag(value) === 'Array'\n));\n\nexport function isFunction(value) {\n  return typeof value === 'function' || toStringTag(value) === 'Function';\n}\n\nexport function isObject(value) {\n  return typeof value && (typeof value === 'object' || isFunction(value));\n}\n\nexport function isPrimitive(value) {\n  return value === null || /^(number|string|boolean|symbol|undefined)$/.test(typeof value);\n}\n\nexport function isString(value) {\n  return toStringTag(value) === 'String';\n}\n\nexport function assign(target, ...objects) {\n  iterate(objects, (source) => {\n    iterate(source, (value, key) => {\n      target[key] = value;\n    });\n  });\n\n  return target;\n}\n\nexport function iterate(object, callback) {\n  const array = isArray(object);\n\n  let iterated = 0;\n  const { length } = object || {};\n\n  for (const key in object) {\n    if (hasOwnProperty.call(object, key)) {\n      if (array && iterated++ >= length) {\n        break;\n      }\n\n      callback(object[key], array ? +key : key, object);\n    }\n  }\n}\n\nexport function map(object, callback) {\n  const newObject = isArray(object)\n    ? []\n    : {};\n\n  iterate(object, (value, key) => {\n    newObject[key] = callback(value, key, object);\n  });\n\n  return newObject;\n}\n\nexport function trim(string) {\n  return string.replace(whiteSpace, '');\n}\n\nexport function replaceString(string, stringToReplace, replacement) {\n  return string\n    .split(stringToReplace)\n    .join(replacement);\n}\n\nexport function deepClone(object) {\n  if (isPrimitive(object) || isFunction(object)) {\n    return object;\n  }\n\n  const clone = isArray(object)\n    ? []\n    : {};\n\n  iterate(object, (value, key) => {\n    clone[key] = deepClone(value);\n  });\n\n  return clone;\n}\n\nexport function deepAssign(target, ...objects) {\n  iterate(objects, (object) => {\n    iterate(object, (object, key) => {\n      if (isPrimitive(object) || !hasOwnProperty.call(target, key)) {\n        target[key] = deepClone(object);\n\n        return;\n      }\n\n      if (!isPrimitive(target[key])) {\n        deepAssign(target[key], object);\n      }\n    });\n  });\n\n  return target;\n}\n\nexport function hasOwn(object, property) {\n  return hasOwnProperty.call(object, property);\n}\n","import {\n  isArray,\n  isObject,\n  iterate,\n  map,\n  replaceString\n} from './utils';\n\nconst absoluteURLRegexp = /^(([a-z][a-z\\d+\\-.]*:)?\\/\\/|data:[a-z]+\\/[a-z]+;base64,)/i;\nconst emptyArray = [];\n\nexport default (baseURL, url, params, query) => {\n  let URL = isAbsolute(url)\n    ? url\n    : `${ String(baseURL).replace(/\\/+$/, '') }/${ String(url).replace(/^\\/+/, '') }`;\n\n  iterate(params, (value, param) => {\n    URL = replaceString(URL, `:${ param }`, encode(value));\n  });\n\n  const queryParams = querySwitcher(query, '');\n\n  if (queryParams.length) {\n    const prefix = URL.indexOf('?') === -1 ? '?' : '&';\n    const postfix = map(queryParams, ({ param, value }) => (\n      `${ encode(param) }=${ encode(value) }`\n    )).join('&');\n\n    URL += prefix + postfix;\n  }\n\n  return URL;\n};\n\nfunction isAbsolute(url) {\n  return absoluteURLRegexp.test(url);\n}\n\nfunction encode(string) {\n  return encodeURIComponent(string);\n}\n\nfunction querySwitcher(query, prefix) {\n  /* eslint indent: 0 */\n  switch (true) {\n    case isArray(query): {\n      const queryParams = [];\n\n      iterate(query, (value) => {\n        if (isObject(value)) {\n          return queryParams.push(...querySwitcher(value, `${ prefix }[]`));\n        }\n\n        queryParams.push({\n          param: `${ prefix }[]`,\n          value\n        });\n      });\n\n      return queryParams;\n    }\n\n    case isObject(query): {\n      const queryParams = [];\n\n      iterate(query, (value, param) => {\n        if (isObject(value)) {\n          queryParams.push(...querySwitcher(value, prefix ? `${ prefix }[${ param }]` : param));\n\n          return;\n        }\n\n        queryParams.push({\n          param: prefix ? `${ prefix }[${ param }]` : param,\n          value: String(value)\n        });\n      });\n\n      return queryParams;\n    }\n\n    default: {\n      return emptyArray;\n    }\n  }\n}\n","import {\n  isFunction,\n  isString,\n  assign,\n  iterate,\n  deepAssign,\n  deepClone,\n  hasOwn\n} from './utils';\n\nimport constructURL from './constructURL';\nimport parseHeaders from './parseHeaders';\nimport transformData from './transformData';\n\n/**\n * @typedef {'get'|'post'|'delete'|'head'|'put'|'patch'} AjaxerMethod\n * @public\n */\n\n/**\n * @typedef {Object} AjaxerConfig\n * @public\n * @property {Array.<AjaxerAfterMiddleware|AjaxerErrorAfterMiddleware>} [after]\n * @property {Object} [auth]\n * @property {String} [auth.username]\n * @property {String} [auth.password]\n * @property {String} [baseURL]\n * @property {Array.<AjaxerBeforeMiddleware|AjaxerErrorBeforeMiddleware>} [before]\n * @property {*} [data]\n * @property {Object.<String, String>} [headers]\n * @property {AjaxerMethod} [method]\n * @property {Object} [params]\n * @property {Object} [query]\n * @property {String} [responseType]\n * @property {Number} [timeout]\n * @property {String} [url]\n * @property {Boolean} [withCredentials]\n */\n\n/**\n * @typedef {Object} AjaxerResponse\n * @public\n * @property {AjaxerConfig} config\n * @property {*} data\n * @property {Object.<String, String>} headers\n * @property {Number} status\n * @property {String} statusText\n * @property {XMLHttpRequest} xhr\n */\n\n/**\n * @callback AjaxerAfterMiddleware\n * @public\n * @param {AjaxerResponse} config - Ajaxer response.\n */\n\n/**\n * @callback AjaxerErrorAfterMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {AjaxerResponse} config - Ajaxer response.\n */\n\n/**\n * @callback AjaxerBeforeMiddleware\n * @public\n * @param {AjaxerConfig} config - Ajaxer config.\n */\n\n/**\n * @callback AjaxerErrorBeforeMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {AjaxerConfig} config - Ajaxer config.\n */\n\n/**\n * @callback AjaxerConfigFunction\n * @public\n * @param {AjaxerConfig} config\n */\n\nconst defaults = {\n  after: [],\n  auth: {\n    username: '',\n    password: ''\n  },\n  baseURL: window.location.origin,\n  before: [],\n  data: null,\n  headers: {},\n  method: 'get',\n  params: {},\n  query: {},\n  responseType: '',\n  timeout: 0,\n  url: '',\n  withCredentials: false\n};\nconst uploadMethods = ['POST', 'PUT'];\nlet Promise;\n\n/**\n * @class Ajaxer\n * @extends Function\n * @public\n * @param {AjaxerConfig} [config = {}] - Config to add.\n * @returns {Ajaxer} Instance of Ajaxer.\n * An instance of Ajaxer is a function that simply calls #request with the same arguments.\n * @description Class for fetching data.\n *\n * @example\n * const ajaxer = new Ajaxer();\n *\n * ajaxer('/data').then((res) => {\n *   console.log(res);\n * });\n */\nclass Ajaxer extends Function {\n  /**\n   * @method Ajaxer.usePromise\n   * @public\n   * @param {Promise} PromiseClass - Promise class to use.\n   */\n  static usePromise(PromiseClass) {\n    Promise = PromiseClass;\n  }\n\n  constructor(config = {}) {\n    super();\n\n    function ajaxer() {\n      return ajaxer.request.apply(ajaxer, arguments);\n    }\n\n    const conf = deepAssign({}, defaults, config);\n\n    if (conf.before.indexOf(fetchBeforeMiddleware) === -1) {\n      conf.before.push(fetchBeforeMiddleware);\n    }\n\n    /**\n     * @member {AjaxerConfig} Ajaxer#$$\n     * @type {AjaxerConfig}\n     * @public\n     * @description Ajaxer config.\n     */\n    Object.defineProperty(ajaxer, '$$', { value: conf });\n    Object.setPrototypeOf(ajaxer, Ajaxer.prototype);\n\n    return ajaxer;\n  }\n\n  /**\n   * @method Ajaxer#after\n   * @public\n   * @param {AjaxerAfterMiddleware|AjaxerErrorAfterMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [afterAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the end\" and falsey for \"to the beginning\".\n   * @returns {Ajaxer} Returns this.\n   * @description Middleware that is called after the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const ajaxer = new Ajaxer()\n   *   .after((err, res) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .after((res) => {\n   *     res.json = JSON.parse(res.data):\n   *   });\n   */\n  after(middleware, afterAll = true) {\n    const { after } = this.$$;\n\n    if (afterAll) {\n      after.push(middleware);\n    } else {\n      after.unshift(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#before\n   * @public\n   * @param {AjaxerBeforeMiddleware|AjaxerErrorBeforeMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [beforeAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the beginning\" and falsey for \"to the end\".\n   * @returns {Ajaxer} Returns this.\n   * @description Middleware that is called before the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const ajaxer = new Ajaxer()\n   *   .before((err, req) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .before((req) => {\n   *     if (req.url === '/veryLongRequest') {\n   *       req.timeout = 30000;\n   *     }\n   *   });\n   */\n  before(middleware, beforeAll = true) {\n    const { before } = this.$$;\n\n    if (beforeAll) {\n      before.unshift(middleware);\n    } else {\n      before.push(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#config\n   * @public\n   * @param {String|AjaxerConfig|AjaxerConfigFunction} [property] - If it's a function\n   * it's called with the fetch config argument, if it's a string the value argument\n   * is used for assigning this property to the fetch config\n   * otherwise it's assigned to the fetch config.\n   * @param {*} [value] - See the property argument.\n   * @returns {Ajaxer|AjaxerConfig} If the argument is present this is returned otherwise the fetch config is returned.\n   * @description Method for getting and setting config.\n   *\n   * @example\n   * const ajaxer = new Ajaxer();\n   *\n   * ajaxer.config({ baseURL: 5000 });\n   * ajaxer.config().timeout; // 5000\n   *\n   * ajaxer.config((config) => {\n   *   config.baseURL += '/api';\n   * });\n   */\n  config(property, value) {\n    const config = this.$$;\n\n    if (!arguments.length) {\n      return config;\n    }\n\n    if (isFunction(property)) {\n      property(config);\n    } else {\n      if (arguments.length >= 2) {\n        property = { [property]: value };\n      }\n\n      deepAssign(config, property);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#delete\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for delete requests.\n   *\n   * @example\n   * ajaxer.delete('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  delete(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'delete' }, config));\n  }\n\n  /**\n   * @method Ajaxer#get\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for get requests.\n   *\n   * @example\n   * ajaxer.get('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  get(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'get' }, config));\n  }\n\n  /**\n   * @method Ajaxer#head\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.head('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  head(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'head' }, config));\n  }\n\n  /**\n   * @method Ajaxer#headers\n   * @public\n   * @param {String|Object.<String, String>} header - A header string or an object of the following format:\n   * { [header]: [value1, value2, ...] }.\n   * @param {String} [value] - Header value. If the first argument is a string\n   * this has to be a header value.\n   * @returns {Ajaxer} Returns this.\n   * @description Method for setting request headers.\n   *\n   * @example\n   * ajaxer\n   *   .headers('My-Header', 'Value')\n   *   .headers({\n   *     'My-Another-Header': 'Value2'\n   *   });\n   */\n  headers(header, value) {\n    const { headers } = this.$$;\n\n    if (arguments.length >= 2) {\n      header = { [header]: value };\n    }\n\n    iterate(header, (value, header) => {\n      headers[header] = value;\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#instance\n   * @public\n   * @param {AjaxerConfig} [config] - New config if needed.\n   * @returns {Ajaxer} New instance of Ajaxer.\n   * @description Method for creating new ajaxer instances based on already existent.\n   *\n   * @example\n   * const mainAjaxer = new Ajaxer({\n   *   baseURL: '//other.domain.com/api',\n   *   withCredentials: true\n   * });\n   *\n   * const longAjaxer = mainAjaxer.instance({\n   *   timeout: 10000\n   * });\n   */\n  instance(config = {}) {\n    const dataConfig = hasOwn(config, 'data')\n      ? { data: config.data }\n      : {};\n\n    delete config.data;\n\n    const conf = assign(\n      deepAssign({}, this.$$, config),\n      dataConfig\n    );\n\n    return new Ajaxer(conf);\n  }\n\n  /**\n   * @method Ajaxer#patch\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.patch('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  patch(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'patch', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#post\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.post('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  post(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'post', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#put\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.put('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  put(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'put', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#request\n   * @public\n   * @param {String} [url] - URL for the request.\n   * @param {AjaxerConfig} [config] - Additional config for this particular request.\n   * @returns {Promise.<AjaxerResponse, Error>} Promise that is resolved with the request response.\n   * @description Main function for making requests. All request methods call this method\n   * including the fetch instance itself.\n   *\n   * @example\n   * ajaxer.request('/data', { timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * ajaxer.request({ timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * ajaxer.request().then((res) => {\n   *   console.log(res);\n   * });\n   */\n  request(url, config = {}) {\n    if (arguments.length === 1 && !isString(url)) {\n      config = url;\n    }\n\n    const dataConfig = hasOwn(config, 'data')\n      ? { data: config.data }\n      : {};\n    const urlConfig = isString(url)\n      ? { url }\n      : {};\n\n    delete config.data;\n\n    const conf = assign(\n      deepAssign(\n        deepClone(this.$$),\n        urlConfig,\n        config\n      ),\n      dataConfig\n    );\n\n    let xhr;\n    let promise = Promise.resolve();\n\n    iterate(conf.before, (middleware) => {\n      promise = promise.then(() => {\n        if (middleware.length >= 2) {\n          return Promise.resolve();\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(conf));\n        });\n      }, (err) => {\n        if (middleware.length < 2) {\n          return Promise.reject(err);\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(err, conf));\n        });\n      });\n    });\n\n    promise = promise.then(() => new Promise((resolve, reject) => {\n      const {\n        after,\n        auth: {\n          username,\n          password\n        },\n        data,\n        headers,\n        method,\n        onprogress,\n        responseType,\n        timeout,\n        url,\n        withCredentials\n      } = conf;\n\n      xhr = new XMLHttpRequest();\n\n      xhr.open(method, url, true, username, password);\n\n      iterate(headers, (value, header) => {\n        xhr.setRequestHeader(header, value);\n      });\n\n      if (onprogress) {\n        if (uploadMethods.indexOf(method) === -1) {\n          xhr.onprogress = onprogress;\n        } else {\n          xhr.upload.onprogress = onprogress;\n        }\n      }\n\n      xhr.onabort = () => {\n        const error = new Error('Request was aborted');\n\n        error.type = 'ABORT_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.onerror = () => {\n        const error = new Error('Network error');\n\n        error.type = 'NETWORK_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.ontimeout = () => {\n        const error = new Error('Request time exceeded');\n\n        error.type = 'TIMEOUT_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.onreadystatechange = () => {\n        if (!xhr || !xhr.status || xhr.readyState !== 4) {\n          return;\n        }\n\n        const response = {\n          config: conf,\n          data: !responseType || responseType === 'text' ? xhr.responseText : xhr.response,\n          headers: parseHeaders(xhr.getAllResponseHeaders()),\n          status: xhr.status === 1223 ? 204 : xhr.status,\n          statusText: xhr.status === 1223 ? 'No Content' : xhr.statusText,\n          xhr\n        };\n\n        let promise = Promise.resolve();\n\n        iterate(after, (middleware) => {\n          promise = promise.then(() => {\n            if (middleware.length >= 2) {\n              return Promise.resolve();\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(response));\n            });\n          }, (err) => {\n            if (middleware.length < 2) {\n              return Promise.reject(err);\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(err, response));\n            });\n          });\n        });\n\n        resolve(promise\n          .then(() => response)\n          .catch((err) => {\n            try {\n              err.response = response;\n            } catch (e) {\n              throw err;\n            }\n\n            throw err;\n          })\n        );\n      };\n\n      xhr.responseType = responseType;\n      xhr.timeout = +timeout || 0;\n      xhr.withCredentials = !!withCredentials;\n\n      xhr.send(data);\n    }));\n\n    promise.abort = function abort() {\n      if (xhr) {\n        xhr.abort();\n      }\n\n      return this;\n    };\n\n    return promise;\n  }\n}\n\nfunction fetchBeforeMiddleware(config) {\n  const {\n    baseURL,\n    data,\n    headers,\n    method,\n    params,\n    query,\n    url\n  } = config;\n  const METHOD = method.toUpperCase();\n\n  config.method = METHOD;\n  config.url = constructURL(baseURL, url, params, query);\n  config.data = transformData(data, METHOD, headers);\n}\n\n/**\n * @const {Ajaxer} fetch\n * @type {Ajaxer}\n * @public\n * @description Empty instance of Ajaxer.\n */\nconst fetch = new Ajaxer();\n\nexport default Ajaxer;\nexport { Ajaxer, fetch };\n","import {\n  iterate,\n  trim\n} from './utils';\n\nexport default (rawHeaders) => {\n  const headers = {};\n\n  iterate((rawHeaders || '').split('\\n'), (value) => {\n    const index = value.indexOf(':');\n    const key = trim(value.substring(0, index));\n    const val = trim(value.substring(index + 1));\n\n    if (key) {\n      headers[key] = (headers[key] ? `${ headers[key] }, ` : '') + val;\n    }\n  });\n\n  return headers;\n};\n","import {\n  isObject,\n  toStringTag\n} from './utils';\n\nconst notToTransform = ['FormData', 'File', 'Blob', 'ArrayBuffer', 'String', 'Number'];\nconst withoutBody = ['DELETE', 'GET', 'HEAD'];\n\nexport default (data, method, headers) => {\n  if (withoutBody.indexOf(method) !== -1) {\n    return null;\n  }\n\n  if (isObject(data) && notToTransform.indexOf(toStringTag(data)) === -1) {\n    if (!headers['Content-Type']) {\n      headers['Content-Type'] = 'application/json;charset=utf-8';\n    }\n\n    return JSON.stringify(data);\n  }\n\n  return data;\n};\n","import Ajaxer from './lib/Ajaxer';\n\nwindow.Ajaxer = Ajaxer;\n"],"names":["toStringTag","value","toString","call","slice","isFunction","isObject","isPrimitive","test","isString","assign","target","objects","source","key","iterate","object","callback","array","isArray","iterated","length","hasOwnProperty","map","newObject","trim","string","replace","whiteSpace","replaceString","stringToReplace","replacement","split","join","deepClone","clone","deepAssign","hasOwn","property","isAbsolute","url","absoluteURLRegexp","encode","encodeURIComponent","querySwitcher","query","prefix","queryParams","push","param","String","emptyArray","fetchBeforeMiddleware","config","baseURL","data","headers","method","params","METHOD","toUpperCase","constructURL","transformData","Array","URL","indexOf","postfix","rawHeaders","index","substring","val","notToTransform","withoutBody","JSON","stringify","defaults","window","location","origin","uploadMethods","Promise","Ajaxer","ajaxer","request","apply","arguments","conf","before","defineProperty","setPrototypeOf","prototype","PromiseClass","middleware","afterAll","after","this","$$","unshift","beforeAll","undefined","header","dataConfig","urlConfig","xhr","promise","resolve","then","err","reject","auth","username","password","onprogress","responseType","timeout","withCredentials","XMLHttpRequest","open","setRequestHeader","upload","onabort","error","Error","type","onerror","ontimeout","onreadystatechange","status","readyState","response","responseText","parseHeaders","getAllResponseHeaders","statusText","catch","e","send","abort","Function"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWpheGVyLmpzIiwic291cmNlcyI6WyIuLi9saWIvdXRpbHMuanMiLCIuLi9saWIvY29uc3RydWN0VVJMLmpzIiwiLi4vbGliL0FqYXhlci5qcyIsIi4uL2xpYi9wYXJzZUhlYWRlcnMuanMiLCIuLi9saWIvdHJhbnNmb3JtRGF0YS5qcyIsIi4uL2Jyb3dzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICBoYXNPd25Qcm9wZXJ0eSxcbiAgdG9TdHJpbmdcbn0gPSB7fTtcbmNvbnN0IHdoaXRlU3BhY2UgPSAvXlxccyp8XFxzKiQvZztcbmNvbnN0IHByaW1pdGl2ZSA9IC9eKG51bWJlcnxzdHJpbmd8Ym9vbGVhbnxzeW1ib2x8dW5kZWZpbmVkKSQvO1xuXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmdUYWcodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nXG4gICAgLmNhbGwodmFsdWUpXG4gICAgLnNsaWNlKDgsIC0xKTtcbn1cblxuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8ICgodmFsdWUpID0+IChcbiAgdG9TdHJpbmdUYWcodmFsdWUpID09PSAnQXJyYXknXG4pKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0b1N0cmluZ1RhZyh2YWx1ZSkgPT09ICdGdW5jdGlvbic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnIHx8IGlzRnVuY3Rpb24odmFsdWUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCAvXihudW1iZXJ8c3RyaW5nfGJvb2xlYW58c3ltYm9sfHVuZGVmaW5lZCkkLy50ZXN0KHR5cGVvZiB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmdUYWcodmFsdWUpID09PSAnU3RyaW5nJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIC4uLm9iamVjdHMpIHtcbiAgaXRlcmF0ZShvYmplY3RzLCAoc291cmNlKSA9PiB7XG4gICAgaXRlcmF0ZShzb3VyY2UsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZShvYmplY3QsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGFycmF5ID0gaXNBcnJheShvYmplY3QpO1xuXG4gIGxldCBpdGVyYXRlZCA9IDA7XG4gIGNvbnN0IHsgbGVuZ3RoIH0gPSBvYmplY3QgfHwge307XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICBpZiAoYXJyYXkgJiYgaXRlcmF0ZWQrKyA+PSBsZW5ndGgpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKG9iamVjdFtrZXldLCBhcnJheSA/ICtrZXkgOiBrZXksIG9iamVjdCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXAob2JqZWN0LCBjYWxsYmFjaykge1xuICBjb25zdCBuZXdPYmplY3QgPSBpc0FycmF5KG9iamVjdClcbiAgICA/IFtdXG4gICAgOiB7fTtcblxuICBpdGVyYXRlKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICBuZXdPYmplY3Rba2V5XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCk7XG4gIH0pO1xuXG4gIHJldHVybiBuZXdPYmplY3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmltKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uod2hpdGVTcGFjZSwgJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZVN0cmluZyhzdHJpbmcsIHN0cmluZ1RvUmVwbGFjZSwgcmVwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHN0cmluZ1xuICAgIC5zcGxpdChzdHJpbmdUb1JlcGxhY2UpXG4gICAgLmpvaW4ocmVwbGFjZW1lbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVlcENsb25lKG9iamVjdCkge1xuICBpZiAoaXNQcmltaXRpdmUob2JqZWN0KSB8fCBpc0Z1bmN0aW9uKG9iamVjdCkpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgY29uc3QgY2xvbmUgPSBpc0FycmF5KG9iamVjdClcbiAgICA/IFtdXG4gICAgOiB7fTtcblxuICBpdGVyYXRlKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICBjbG9uZVtrZXldID0gZGVlcENsb25lKHZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNsb25lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVlcEFzc2lnbih0YXJnZXQsIC4uLm9iamVjdHMpIHtcbiAgaXRlcmF0ZShvYmplY3RzLCAob2JqZWN0KSA9PiB7XG4gICAgaXRlcmF0ZShvYmplY3QsIChvYmplY3QsIGtleSkgPT4ge1xuICAgICAgaWYgKGlzUHJpbWl0aXZlKG9iamVjdCkgfHwgIWhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gZGVlcENsb25lKG9iamVjdCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzUHJpbWl0aXZlKHRhcmdldFtrZXldKSkge1xuICAgICAgICBkZWVwQXNzaWduKHRhcmdldFtrZXldLCBvYmplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iamVjdCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG59XG4iLCJpbXBvcnQge1xuICBpc0FycmF5LFxuICBpc09iamVjdCxcbiAgaXRlcmF0ZSxcbiAgbWFwLFxuICByZXBsYWNlU3RyaW5nXG59IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBhYnNvbHV0ZVVSTFJlZ2V4cCA9IC9eKChbYS16XVthLXpcXGQrXFwtLl0qOik/XFwvXFwvfGRhdGE6W2Etel0rXFwvW2Etel0rO2Jhc2U2NCwpL2k7XG5jb25zdCBlbXB0eUFycmF5ID0gW107XG5cbmV4cG9ydCBkZWZhdWx0IChiYXNlVVJMLCB1cmwsIHBhcmFtcywgcXVlcnkpID0+IHtcbiAgbGV0IFVSTCA9IGlzQWJzb2x1dGUodXJsKVxuICAgID8gdXJsXG4gICAgOiBgJHsgU3RyaW5nKGJhc2VVUkwpLnJlcGxhY2UoL1xcLyskLywgJycpIH0vJHsgU3RyaW5nKHVybCkucmVwbGFjZSgvXlxcLysvLCAnJykgfWA7XG5cbiAgaXRlcmF0ZShwYXJhbXMsICh2YWx1ZSwgcGFyYW0pID0+IHtcbiAgICBVUkwgPSByZXBsYWNlU3RyaW5nKFVSTCwgYDokeyBwYXJhbSB9YCwgZW5jb2RlKHZhbHVlKSk7XG4gIH0pO1xuXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcXVlcnlTd2l0Y2hlcihxdWVyeSwgJycpO1xuXG4gIGlmIChxdWVyeVBhcmFtcy5sZW5ndGgpIHtcbiAgICBjb25zdCBwcmVmaXggPSBVUkwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJztcbiAgICBjb25zdCBwb3N0Zml4ID0gbWFwKHF1ZXJ5UGFyYW1zLCAoeyBwYXJhbSwgdmFsdWUgfSkgPT4gKFxuICAgICAgYCR7IGVuY29kZShwYXJhbSkgfT0keyBlbmNvZGUodmFsdWUpIH1gXG4gICAgKSkuam9pbignJicpO1xuXG4gICAgVVJMICs9IHByZWZpeCArIHBvc3RmaXg7XG4gIH1cblxuICByZXR1cm4gVVJMO1xufTtcblxuZnVuY3Rpb24gaXNBYnNvbHV0ZSh1cmwpIHtcbiAgcmV0dXJuIGFic29sdXRlVVJMUmVnZXhwLnRlc3QodXJsKTtcbn1cblxuZnVuY3Rpb24gZW5jb2RlKHN0cmluZykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZyk7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5U3dpdGNoZXIocXVlcnksIHByZWZpeCkge1xuICAvKiBlc2xpbnQgaW5kZW50OiAwICovXG4gIHN3aXRjaCAodHJ1ZSkge1xuICAgIGNhc2UgaXNBcnJheShxdWVyeSk6IHtcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gW107XG5cbiAgICAgIGl0ZXJhdGUocXVlcnksICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zLnB1c2goLi4ucXVlcnlTd2l0Y2hlcih2YWx1ZSwgYCR7IHByZWZpeCB9W11gKSk7XG4gICAgICAgIH1cblxuICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKHtcbiAgICAgICAgICBwYXJhbTogYCR7IHByZWZpeCB9W11gLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgICB9XG5cbiAgICBjYXNlIGlzT2JqZWN0KHF1ZXJ5KToge1xuICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBbXTtcblxuICAgICAgaXRlcmF0ZShxdWVyeSwgKHZhbHVlLCBwYXJhbSkgPT4ge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMucHVzaCguLi5xdWVyeVN3aXRjaGVyKHZhbHVlLCBwcmVmaXggPyBgJHsgcHJlZml4IH1bJHsgcGFyYW0gfV1gIDogcGFyYW0pKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goe1xuICAgICAgICAgIHBhcmFtOiBwcmVmaXggPyBgJHsgcHJlZml4IH1bJHsgcGFyYW0gfV1gIDogcGFyYW0sXG4gICAgICAgICAgdmFsdWU6IFN0cmluZyh2YWx1ZSlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaXNGdW5jdGlvbixcbiAgaXNTdHJpbmcsXG4gIGFzc2lnbixcbiAgaXRlcmF0ZSxcbiAgZGVlcEFzc2lnbixcbiAgZGVlcENsb25lLFxuICBoYXNPd25cbn0gZnJvbSAnLi91dGlscyc7XG5cbmltcG9ydCBjb25zdHJ1Y3RVUkwgZnJvbSAnLi9jb25zdHJ1Y3RVUkwnO1xuaW1wb3J0IHBhcnNlSGVhZGVycyBmcm9tICcuL3BhcnNlSGVhZGVycyc7XG5pbXBvcnQgdHJhbnNmb3JtRGF0YSBmcm9tICcuL3RyYW5zZm9ybURhdGEnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnZ2V0J3wncG9zdCd8J2RlbGV0ZSd8J2hlYWQnfCdwdXQnfCdwYXRjaCd9IEFqYXhlck1ldGhvZFxuICogQHB1YmxpY1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQWpheGVyQ29uZmlnXG4gKiBAcHVibGljXG4gKiBAcHJvcGVydHkge0FycmF5LjxBamF4ZXJBZnRlck1pZGRsZXdhcmV8QWpheGVyRXJyb3JBZnRlck1pZGRsZXdhcmU+fSBbYWZ0ZXJdXG4gKiBAcHJvcGVydHkge09iamVjdH0gW2F1dGhdXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW2F1dGgudXNlcm5hbWVdXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW2F1dGgucGFzc3dvcmRdXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW2Jhc2VVUkxdXG4gKiBAcHJvcGVydHkge0FycmF5LjxBamF4ZXJCZWZvcmVNaWRkbGV3YXJlfEFqYXhlckVycm9yQmVmb3JlTWlkZGxld2FyZT59IFtiZWZvcmVdXG4gKiBAcHJvcGVydHkgeyp9IFtkYXRhXVxuICogQHByb3BlcnR5IHtPYmplY3QuPFN0cmluZywgU3RyaW5nPn0gW2hlYWRlcnNdXG4gKiBAcHJvcGVydHkge0FqYXhlck1ldGhvZH0gW21ldGhvZF1cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbcGFyYW1zXVxuICogQHByb3BlcnR5IHtPYmplY3R9IFtxdWVyeV1cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbcmVzcG9uc2VUeXBlXVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFt0aW1lb3V0XVxuICogQHByb3BlcnR5IHtTdHJpbmd9IFt1cmxdXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFt3aXRoQ3JlZGVudGlhbHNdXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBamF4ZXJSZXNwb25zZVxuICogQHB1YmxpY1xuICogQHByb3BlcnR5IHtBamF4ZXJDb25maWd9IGNvbmZpZ1xuICogQHByb3BlcnR5IHsqfSBkYXRhXG4gKiBAcHJvcGVydHkge09iamVjdC48U3RyaW5nLCBTdHJpbmc+fSBoZWFkZXJzXG4gKiBAcHJvcGVydHkge051bWJlcn0gc3RhdHVzXG4gKiBAcHJvcGVydHkge1N0cmluZ30gc3RhdHVzVGV4dFxuICogQHByb3BlcnR5IHtYTUxIdHRwUmVxdWVzdH0geGhyXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgQWpheGVyQWZ0ZXJNaWRkbGV3YXJlXG4gKiBAcHVibGljXG4gKiBAcGFyYW0ge0FqYXhlclJlc3BvbnNlfSBjb25maWcgLSBBamF4ZXIgcmVzcG9uc2UuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgQWpheGVyRXJyb3JBZnRlck1pZGRsZXdhcmVcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7RXJyb3J8Kn0gZXJyIC0gVGhyb3duIGVycm9yLlxuICogQHBhcmFtIHtBamF4ZXJSZXNwb25zZX0gY29uZmlnIC0gQWpheGVyIHJlc3BvbnNlLlxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIEFqYXhlckJlZm9yZU1pZGRsZXdhcmVcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBjb25maWcgLSBBamF4ZXIgY29uZmlnLlxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIEFqYXhlckVycm9yQmVmb3JlTWlkZGxld2FyZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtFcnJvcnwqfSBlcnIgLSBUaHJvd24gZXJyb3IuXG4gKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gY29uZmlnIC0gQWpheGVyIGNvbmZpZy5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBBamF4ZXJDb25maWdGdW5jdGlvblxuICogQHB1YmxpY1xuICogQHBhcmFtIHtBamF4ZXJDb25maWd9IGNvbmZpZ1xuICovXG5cbmNvbnN0IGRlZmF1bHRzID0ge1xuICBhZnRlcjogW10sXG4gIGF1dGg6IHtcbiAgICB1c2VybmFtZTogJycsXG4gICAgcGFzc3dvcmQ6ICcnXG4gIH0sXG4gIGJhc2VVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gIGJlZm9yZTogW10sXG4gIGRhdGE6IG51bGwsXG4gIGhlYWRlcnM6IHt9LFxuICBtZXRob2Q6ICdnZXQnLFxuICBwYXJhbXM6IHt9LFxuICBxdWVyeToge30sXG4gIHJlc3BvbnNlVHlwZTogJycsXG4gIHRpbWVvdXQ6IDAsXG4gIHVybDogJycsXG4gIHdpdGhDcmVkZW50aWFsczogZmFsc2Vcbn07XG5jb25zdCB1cGxvYWRNZXRob2RzID0gWydQT1NUJywgJ1BVVCddO1xubGV0IFByb21pc2U7XG5cbi8qKlxuICogQGNsYXNzIEFqYXhlclxuICogQGV4dGVuZHMgRnVuY3Rpb25cbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnID0ge31dIC0gQ29uZmlnIHRvIGFkZC5cbiAqIEByZXR1cm5zIHtBamF4ZXJ9IEluc3RhbmNlIG9mIEFqYXhlci5cbiAqIEFuIGluc3RhbmNlIG9mIEFqYXhlciBpcyBhIGZ1bmN0aW9uIHRoYXQgc2ltcGx5IGNhbGxzICNyZXF1ZXN0IHdpdGggdGhlIHNhbWUgYXJndW1lbnRzLlxuICogQGRlc2NyaXB0aW9uIENsYXNzIGZvciBmZXRjaGluZyBkYXRhLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBhamF4ZXIgPSBuZXcgQWpheGVyKCk7XG4gKlxuICogYWpheGVyKCcvZGF0YScpLnRoZW4oKHJlcykgPT4ge1xuICogICBjb25zb2xlLmxvZyhyZXMpO1xuICogfSk7XG4gKi9cbmNsYXNzIEFqYXhlciBleHRlbmRzIEZ1bmN0aW9uIHtcbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyLnVzZVByb21pc2VcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1Byb21pc2V9IFByb21pc2VDbGFzcyAtIFByb21pc2UgY2xhc3MgdG8gdXNlLlxuICAgKi9cbiAgc3RhdGljIHVzZVByb21pc2UoUHJvbWlzZUNsYXNzKSB7XG4gICAgUHJvbWlzZSA9IFByb21pc2VDbGFzcztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGZ1bmN0aW9uIGFqYXhlcigpIHtcbiAgICAgIHJldHVybiBhamF4ZXIucmVxdWVzdC5hcHBseShhamF4ZXIsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZiA9IGRlZXBBc3NpZ24oe30sIGRlZmF1bHRzLCBjb25maWcpO1xuXG4gICAgaWYgKGNvbmYuYmVmb3JlLmluZGV4T2YoZmV0Y2hCZWZvcmVNaWRkbGV3YXJlKSA9PT0gLTEpIHtcbiAgICAgIGNvbmYuYmVmb3JlLnB1c2goZmV0Y2hCZWZvcmVNaWRkbGV3YXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIHtBamF4ZXJDb25maWd9IEFqYXhlciMkJFxuICAgICAqIEB0eXBlIHtBamF4ZXJDb25maWd9XG4gICAgICogQHB1YmxpY1xuICAgICAqIEBkZXNjcmlwdGlvbiBBamF4ZXIgY29uZmlnLlxuICAgICAqL1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhamF4ZXIsICckJCcsIHsgdmFsdWU6IGNvbmYgfSk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGFqYXhlciwgQWpheGVyLnByb3RvdHlwZSk7XG5cbiAgICByZXR1cm4gYWpheGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2FmdGVyXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtBamF4ZXJBZnRlck1pZGRsZXdhcmV8QWpheGVyRXJyb3JBZnRlck1pZGRsZXdhcmV9IG1pZGRsZXdhcmUgLSBNaWRkbGV3YXJlIHRvIGFkZC5cbiAgICogQHBhcmFtIHtCb29sZWFufCp9IFthZnRlckFsbCA9IHRydWVdIC0gQm9vbGVhbiBwYXJhbWV0ZXIgd2hlcmUgdG8gcHV0IHRoZSBtaWRkbGV3YXJlLlxuICAgKiBUcnV0aHkgcGFyYW1ldGVyIHN0YW5kcyBmb3IgXCJ0byB0aGUgZW5kXCIgYW5kIGZhbHNleSBmb3IgXCJ0byB0aGUgYmVnaW5uaW5nXCIuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ9IFJldHVybnMgdGhpcy5cbiAgICogQGRlc2NyaXB0aW9uIE1pZGRsZXdhcmUgdGhhdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHJlcXVlc3QuXG4gICAqIElmIHRoZSBtaWRkbGV3YXJlIGhhcyAyIG9yIGxlc3MgYXJndW1lbnRzIGl0J3MgdHJlYXRlZCBhcyBzdWNjZXNzIG1pZGRsZXdhcmUgb3RoZXJ3aXNlIGFzIGFuIGVycm9yIG9uZS5cbiAgICogSWYgdGhlIG1pZGRsZXdhcmUgcmV0dXJucyBhIHByb21pc2UgaXQgYmVjb21lcyBhIHBhcnQgb2YgdGhlIG1pZGRsZXdhcmUgY2hhaW4uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGFqYXhlciA9IG5ldyBBamF4ZXIoKVxuICAgKiAgIC5hZnRlcigoZXJyLCByZXMpID0+IHtcbiAgICogICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAqXG4gICAqICAgICB0aHJvdyBlcnI7XG4gICAqICAgfSlcbiAgICogICAuYWZ0ZXIoKHJlcykgPT4ge1xuICAgKiAgICAgcmVzLmpzb24gPSBKU09OLnBhcnNlKHJlcy5kYXRhKTpcbiAgICogICB9KTtcbiAgICovXG4gIGFmdGVyKG1pZGRsZXdhcmUsIGFmdGVyQWxsID0gdHJ1ZSkge1xuICAgIGNvbnN0IHsgYWZ0ZXIgfSA9IHRoaXMuJCQ7XG5cbiAgICBpZiAoYWZ0ZXJBbGwpIHtcbiAgICAgIGFmdGVyLnB1c2gobWlkZGxld2FyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFmdGVyLnVuc2hpZnQobWlkZGxld2FyZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjYmVmb3JlXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtBamF4ZXJCZWZvcmVNaWRkbGV3YXJlfEFqYXhlckVycm9yQmVmb3JlTWlkZGxld2FyZX0gbWlkZGxld2FyZSAtIE1pZGRsZXdhcmUgdG8gYWRkLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW58Kn0gW2JlZm9yZUFsbCA9IHRydWVdIC0gQm9vbGVhbiBwYXJhbWV0ZXIgd2hlcmUgdG8gcHV0IHRoZSBtaWRkbGV3YXJlLlxuICAgKiBUcnV0aHkgcGFyYW1ldGVyIHN0YW5kcyBmb3IgXCJ0byB0aGUgYmVnaW5uaW5nXCIgYW5kIGZhbHNleSBmb3IgXCJ0byB0aGUgZW5kXCIuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ9IFJldHVybnMgdGhpcy5cbiAgICogQGRlc2NyaXB0aW9uIE1pZGRsZXdhcmUgdGhhdCBpcyBjYWxsZWQgYmVmb3JlIHRoZSByZXF1ZXN0LlxuICAgKiBJZiB0aGUgbWlkZGxld2FyZSBoYXMgMiBvciBsZXNzIGFyZ3VtZW50cyBpdCdzIHRyZWF0ZWQgYXMgc3VjY2VzcyBtaWRkbGV3YXJlIG90aGVyd2lzZSBhcyBhbiBlcnJvciBvbmUuXG4gICAqIElmIHRoZSBtaWRkbGV3YXJlIHJldHVybnMgYSBwcm9taXNlIGl0IGJlY29tZXMgYSBwYXJ0IG9mIHRoZSBtaWRkbGV3YXJlIGNoYWluLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBhamF4ZXIgPSBuZXcgQWpheGVyKClcbiAgICogICAuYmVmb3JlKChlcnIsIHJlcSkgPT4ge1xuICAgKiAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICpcbiAgICogICAgIHRocm93IGVycjtcbiAgICogICB9KVxuICAgKiAgIC5iZWZvcmUoKHJlcSkgPT4ge1xuICAgKiAgICAgaWYgKHJlcS51cmwgPT09ICcvdmVyeUxvbmdSZXF1ZXN0Jykge1xuICAgKiAgICAgICByZXEudGltZW91dCA9IDMwMDAwO1xuICAgKiAgICAgfVxuICAgKiAgIH0pO1xuICAgKi9cbiAgYmVmb3JlKG1pZGRsZXdhcmUsIGJlZm9yZUFsbCA9IHRydWUpIHtcbiAgICBjb25zdCB7IGJlZm9yZSB9ID0gdGhpcy4kJDtcblxuICAgIGlmIChiZWZvcmVBbGwpIHtcbiAgICAgIGJlZm9yZS51bnNoaWZ0KG1pZGRsZXdhcmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiZWZvcmUucHVzaChtaWRkbGV3YXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNjb25maWdcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xBamF4ZXJDb25maWd8QWpheGVyQ29uZmlnRnVuY3Rpb259IFtwcm9wZXJ0eV0gLSBJZiBpdCdzIGEgZnVuY3Rpb25cbiAgICogaXQncyBjYWxsZWQgd2l0aCB0aGUgZmV0Y2ggY29uZmlnIGFyZ3VtZW50LCBpZiBpdCdzIGEgc3RyaW5nIHRoZSB2YWx1ZSBhcmd1bWVudFxuICAgKiBpcyB1c2VkIGZvciBhc3NpZ25pbmcgdGhpcyBwcm9wZXJ0eSB0byB0aGUgZmV0Y2ggY29uZmlnXG4gICAqIG90aGVyd2lzZSBpdCdzIGFzc2lnbmVkIHRvIHRoZSBmZXRjaCBjb25maWcuXG4gICAqIEBwYXJhbSB7Kn0gW3ZhbHVlXSAtIFNlZSB0aGUgcHJvcGVydHkgYXJndW1lbnQuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ8QWpheGVyQ29uZmlnfSBJZiB0aGUgYXJndW1lbnQgaXMgcHJlc2VudCB0aGlzIGlzIHJldHVybmVkIG90aGVyd2lzZSB0aGUgZmV0Y2ggY29uZmlnIGlzIHJldHVybmVkLlxuICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIGZvciBnZXR0aW5nIGFuZCBzZXR0aW5nIGNvbmZpZy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgYWpheGVyID0gbmV3IEFqYXhlcigpO1xuICAgKlxuICAgKiBhamF4ZXIuY29uZmlnKHsgYmFzZVVSTDogNTAwMCB9KTtcbiAgICogYWpheGVyLmNvbmZpZygpLnRpbWVvdXQ7IC8vIDUwMDBcbiAgICpcbiAgICogYWpheGVyLmNvbmZpZygoY29uZmlnKSA9PiB7XG4gICAqICAgY29uZmlnLmJhc2VVUkwgKz0gJy9hcGknO1xuICAgKiB9KTtcbiAgICovXG4gIGNvbmZpZyhwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLiQkO1xuXG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHByb3BlcnR5KSkge1xuICAgICAgcHJvcGVydHkoY29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgICBwcm9wZXJ0eSA9IHsgW3Byb3BlcnR5XTogdmFsdWUgfTtcbiAgICAgIH1cblxuICAgICAgZGVlcEFzc2lnbihjb25maWcsIHByb3BlcnR5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNkZWxldGVcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBamF4ZXJSZXNwb25zZSwgRXJyb3I+fSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQGRlc2NyaXB0aW9uIFNob3J0aGFuZCBmb3IgI3JlcXVlc3QgZm9yIGRlbGV0ZSByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLmRlbGV0ZSgnL2RhdGEnKS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICovXG4gIGRlbGV0ZSh1cmwsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKCFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ2RlbGV0ZScgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjZ2V0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt1cmxdIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QWpheGVyUmVzcG9uc2UsIEVycm9yPn0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBkZXNjcmlwdGlvbiBTaG9ydGhhbmQgZm9yICNyZXF1ZXN0IGZvciBnZXQgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlci5nZXQoJy9kYXRhJykudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICBnZXQodXJsLCBjb25maWcgPSB7fSkge1xuICAgIGlmICghaXNTdHJpbmcodXJsKSkge1xuICAgICAgY29uZmlnID0gdXJsO1xuICAgICAgdXJsID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXJsLCBhc3NpZ24oeyBtZXRob2Q6ICdnZXQnIH0sIGNvbmZpZykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2hlYWRcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBamF4ZXJSZXNwb25zZSwgRXJyb3I+fSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQGRlc2NyaXB0aW9uIFNob3J0aGFuZCBmb3IgI3JlcXVlc3QgZm9yIGhlYWQgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlci5oZWFkKCcvZGF0YScpLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKi9cbiAgaGVhZCh1cmwsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKCFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ2hlYWQnIH0sIGNvbmZpZykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2hlYWRlcnNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3QuPFN0cmluZywgU3RyaW5nPn0gaGVhZGVyIC0gQSBoZWFkZXIgc3RyaW5nIG9yIGFuIG9iamVjdCBvZiB0aGUgZm9sbG93aW5nIGZvcm1hdDpcbiAgICogeyBbaGVhZGVyXTogW3ZhbHVlMSwgdmFsdWUyLCAuLi5dIH0uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIC0gSGVhZGVyIHZhbHVlLiBJZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYSBzdHJpbmdcbiAgICogdGhpcyBoYXMgdG8gYmUgYSBoZWFkZXIgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ9IFJldHVybnMgdGhpcy5cbiAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCBmb3Igc2V0dGluZyByZXF1ZXN0IGhlYWRlcnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlclxuICAgKiAgIC5oZWFkZXJzKCdNeS1IZWFkZXInLCAnVmFsdWUnKVxuICAgKiAgIC5oZWFkZXJzKHtcbiAgICogICAgICdNeS1Bbm90aGVyLUhlYWRlcic6ICdWYWx1ZTInXG4gICAqICAgfSk7XG4gICAqL1xuICBoZWFkZXJzKGhlYWRlciwgdmFsdWUpIHtcbiAgICBjb25zdCB7IGhlYWRlcnMgfSA9IHRoaXMuJCQ7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBoZWFkZXIgPSB7IFtoZWFkZXJdOiB2YWx1ZSB9O1xuICAgIH1cblxuICAgIGl0ZXJhdGUoaGVhZGVyLCAodmFsdWUsIGhlYWRlcikgPT4ge1xuICAgICAgaGVhZGVyc1toZWFkZXJdID0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNpbnN0YW5jZVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIE5ldyBjb25maWcgaWYgbmVlZGVkLlxuICAgKiBAcmV0dXJucyB7QWpheGVyfSBOZXcgaW5zdGFuY2Ugb2YgQWpheGVyLlxuICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIGZvciBjcmVhdGluZyBuZXcgYWpheGVyIGluc3RhbmNlcyBiYXNlZCBvbiBhbHJlYWR5IGV4aXN0ZW50LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBtYWluQWpheGVyID0gbmV3IEFqYXhlcih7XG4gICAqICAgYmFzZVVSTDogJy8vb3RoZXIuZG9tYWluLmNvbS9hcGknLFxuICAgKiAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgKiB9KTtcbiAgICpcbiAgICogY29uc3QgbG9uZ0FqYXhlciA9IG1haW5BamF4ZXIuaW5zdGFuY2Uoe1xuICAgKiAgIHRpbWVvdXQ6IDEwMDAwXG4gICAqIH0pO1xuICAgKi9cbiAgaW5zdGFuY2UoY29uZmlnID0ge30pIHtcbiAgICBjb25zdCBkYXRhQ29uZmlnID0gaGFzT3duKGNvbmZpZywgJ2RhdGEnKVxuICAgICAgPyB7IGRhdGE6IGNvbmZpZy5kYXRhIH1cbiAgICAgIDoge307XG5cbiAgICBkZWxldGUgY29uZmlnLmRhdGE7XG5cbiAgICBjb25zdCBjb25mID0gYXNzaWduKFxuICAgICAgZGVlcEFzc2lnbih7fSwgdGhpcy4kJCwgY29uZmlnKSxcbiAgICAgIGRhdGFDb25maWdcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBBamF4ZXIoY29uZik7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjcGF0Y2hcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHsqfSBbZGF0YV0gLSBBZGRpdGlvbmFsIHBhcmFtZXRlciBmb3IgdXBsb2FkaW5nIGRhdGEuXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QWpheGVyUmVzcG9uc2UsIEVycm9yPn0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBkZXNjcmlwdGlvbiBTaG9ydGhhbmQgZm9yICNyZXF1ZXN0IGZvciBoZWFkIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhamF4ZXIucGF0Y2goJy9kYXRhJywgeyB1c2VyOiAnSm9obicgfSkudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICBwYXRjaCh1cmwsIGRhdGEgPSB7fSwgY29uZmlnID0ge30pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiAhaXNTdHJpbmcodXJsKSkge1xuICAgICAgY29uZmlnID0gZGF0YTtcbiAgICAgIGRhdGEgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ3BhdGNoJywgZGF0YSB9LCBjb25maWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNwb3N0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt1cmxdIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBwYXJhbSB7Kn0gW2RhdGFdIC0gQWRkaXRpb25hbCBwYXJhbWV0ZXIgZm9yIHVwbG9hZGluZyBkYXRhLlxuICAgKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gW2NvbmZpZ10gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAZGVzY3JpcHRpb24gU2hvcnRoYW5kIGZvciAjcmVxdWVzdCBmb3IgaGVhZCByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLnBvc3QoJy9kYXRhJywgeyB1c2VyOiAnSm9obicgfSkudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICBwb3N0KHVybCwgZGF0YSA9IHt9LCBjb25maWcgPSB7fSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmICFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSBkYXRhO1xuICAgICAgZGF0YSA9IHVybDtcbiAgICAgIHVybCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCwgYXNzaWduKHsgbWV0aG9kOiAncG9zdCcsIGRhdGEgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjcHV0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt1cmxdIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBwYXJhbSB7Kn0gW2RhdGFdIC0gQWRkaXRpb25hbCBwYXJhbWV0ZXIgZm9yIHVwbG9hZGluZyBkYXRhLlxuICAgKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gW2NvbmZpZ10gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAZGVzY3JpcHRpb24gU2hvcnRoYW5kIGZvciAjcmVxdWVzdCBmb3IgaGVhZCByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLnB1dCgnL2RhdGEnLCB7IHVzZXI6ICdKb2huJyB9KS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICovXG4gIHB1dCh1cmwsIGRhdGEgPSB7fSwgY29uZmlnID0ge30pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiAhaXNTdHJpbmcodXJsKSkge1xuICAgICAgY29uZmlnID0gZGF0YTtcbiAgICAgIGRhdGEgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ3B1dCcsIGRhdGEgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjcmVxdWVzdFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdXJsXSAtIFVSTCBmb3IgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIEFkZGl0aW9uYWwgY29uZmlnIGZvciB0aGlzIHBhcnRpY3VsYXIgcmVxdWVzdC5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXF1ZXN0IHJlc3BvbnNlLlxuICAgKiBAZGVzY3JpcHRpb24gTWFpbiBmdW5jdGlvbiBmb3IgbWFraW5nIHJlcXVlc3RzLiBBbGwgcmVxdWVzdCBtZXRob2RzIGNhbGwgdGhpcyBtZXRob2RcbiAgICogaW5jbHVkaW5nIHRoZSBmZXRjaCBpbnN0YW5jZSBpdHNlbGYuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlci5yZXF1ZXN0KCcvZGF0YScsIHsgdGltZW91dDogMTAwMCB9KS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICpcbiAgICogYWpheGVyLnJlcXVlc3QoeyB0aW1lb3V0OiAxMDAwIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKlxuICAgKiBhamF4ZXIucmVxdWVzdCgpLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKi9cbiAgcmVxdWVzdCh1cmwsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgIGNvbmZpZyA9IHVybDtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhQ29uZmlnID0gaGFzT3duKGNvbmZpZywgJ2RhdGEnKVxuICAgICAgPyB7IGRhdGE6IGNvbmZpZy5kYXRhIH1cbiAgICAgIDoge307XG4gICAgY29uc3QgdXJsQ29uZmlnID0gaXNTdHJpbmcodXJsKVxuICAgICAgPyB7IHVybCB9XG4gICAgICA6IHt9O1xuXG4gICAgZGVsZXRlIGNvbmZpZy5kYXRhO1xuXG4gICAgY29uc3QgY29uZiA9IGFzc2lnbihcbiAgICAgIGRlZXBBc3NpZ24oXG4gICAgICAgIGRlZXBDbG9uZSh0aGlzLiQkKSxcbiAgICAgICAgdXJsQ29uZmlnLFxuICAgICAgICBjb25maWdcbiAgICAgICksXG4gICAgICBkYXRhQ29uZmlnXG4gICAgKTtcblxuICAgIGxldCB4aHI7XG4gICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIGl0ZXJhdGUoY29uZi5iZWZvcmUsIChtaWRkbGV3YXJlKSA9PiB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKG1pZGRsZXdhcmUubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICByZXNvbHZlKG1pZGRsZXdhcmUoY29uZikpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgaWYgKG1pZGRsZXdhcmUubGVuZ3RoIDwgMikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShtaWRkbGV3YXJlKGVyciwgY29uZikpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGFmdGVyLFxuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBvbnByb2dyZXNzLFxuICAgICAgICByZXNwb25zZVR5cGUsXG4gICAgICAgIHRpbWVvdXQsXG4gICAgICAgIHVybCxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzXG4gICAgICB9ID0gY29uZjtcblxuICAgICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlLCB1c2VybmFtZSwgcGFzc3dvcmQpO1xuXG4gICAgICBpdGVyYXRlKGhlYWRlcnMsICh2YWx1ZSwgaGVhZGVyKSA9PiB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChvbnByb2dyZXNzKSB7XG4gICAgICAgIGlmICh1cGxvYWRNZXRob2RzLmluZGV4T2YobWV0aG9kKSA9PT0gLTEpIHtcbiAgICAgICAgICB4aHIub25wcm9ncmVzcyA9IG9ucHJvZ3Jlc3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gb25wcm9ncmVzcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB4aHIub25hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1JlcXVlc3Qgd2FzIGFib3J0ZWQnKTtcblxuICAgICAgICBlcnJvci50eXBlID0gJ0FCT1JUX0VSUk9SJztcblxuICAgICAgICByZWplY3QoZXJyb3IpO1xuXG4gICAgICAgIHhociA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcblxuICAgICAgICBlcnJvci50eXBlID0gJ05FVFdPUktfRVJST1InO1xuXG4gICAgICAgIHJlamVjdChlcnJvcik7XG5cbiAgICAgICAgeGhyID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbnRpbWVvdXQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdSZXF1ZXN0IHRpbWUgZXhjZWVkZWQnKTtcblxuICAgICAgICBlcnJvci50eXBlID0gJ1RJTUVPVVRfRVJST1InO1xuXG4gICAgICAgIHJlamVjdChlcnJvcik7XG5cbiAgICAgICAgeGhyID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmICgheGhyIHx8ICF4aHIuc3RhdHVzIHx8IHhoci5yZWFkeVN0YXRlICE9PSA0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgY29uZmlnOiBjb25mLFxuICAgICAgICAgIGRhdGE6ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgPyB4aHIucmVzcG9uc2VUZXh0IDogeGhyLnJlc3BvbnNlLFxuICAgICAgICAgIGhlYWRlcnM6IHBhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpLFxuICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1cyA9PT0gMTIyMyA/ICdObyBDb250ZW50JyA6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICAgIHhoclxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgICAgaXRlcmF0ZShhZnRlciwgKG1pZGRsZXdhcmUpID0+IHtcbiAgICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChtaWRkbGV3YXJlLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgIHJlc29sdmUobWlkZGxld2FyZShyZXNwb25zZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKG1pZGRsZXdhcmUubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgIHJlc29sdmUobWlkZGxld2FyZShlcnIsIHJlc3BvbnNlKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzb2x2ZShwcm9taXNlXG4gICAgICAgICAgLnRoZW4oKCkgPT4gcmVzcG9uc2UpXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGVyci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICAgIHhoci50aW1lb3V0ID0gK3RpbWVvdXQgfHwgMDtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSAhIXdpdGhDcmVkZW50aWFscztcblxuICAgICAgeGhyLnNlbmQoZGF0YSk7XG4gICAgfSkpO1xuXG4gICAgcHJvbWlzZS5hYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgaWYgKHhocikge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZldGNoQmVmb3JlTWlkZGxld2FyZShjb25maWcpIHtcbiAgY29uc3Qge1xuICAgIGJhc2VVUkwsXG4gICAgZGF0YSxcbiAgICBoZWFkZXJzLFxuICAgIG1ldGhvZCxcbiAgICBwYXJhbXMsXG4gICAgcXVlcnksXG4gICAgdXJsXG4gIH0gPSBjb25maWc7XG4gIGNvbnN0IE1FVEhPRCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuXG4gIGNvbmZpZy5tZXRob2QgPSBNRVRIT0Q7XG4gIGNvbmZpZy51cmwgPSBjb25zdHJ1Y3RVUkwoYmFzZVVSTCwgdXJsLCBwYXJhbXMsIHF1ZXJ5KTtcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKGRhdGEsIE1FVEhPRCwgaGVhZGVycyk7XG59XG5cbi8qKlxuICogQGNvbnN0IHtBamF4ZXJ9IGZldGNoXG4gKiBAdHlwZSB7QWpheGVyfVxuICogQHB1YmxpY1xuICogQGRlc2NyaXB0aW9uIEVtcHR5IGluc3RhbmNlIG9mIEFqYXhlci5cbiAqL1xuY29uc3QgZmV0Y2ggPSBuZXcgQWpheGVyKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEFqYXhlcjtcbmV4cG9ydCB7IEFqYXhlciwgZmV0Y2ggfTtcbiIsImltcG9ydCB7XG4gIGl0ZXJhdGUsXG4gIHRyaW1cbn0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IChyYXdIZWFkZXJzKSA9PiB7XG4gIGNvbnN0IGhlYWRlcnMgPSB7fTtcblxuICBpdGVyYXRlKChyYXdIZWFkZXJzIHx8ICcnKS5zcGxpdCgnXFxuJyksICh2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gdmFsdWUuaW5kZXhPZignOicpO1xuICAgIGNvbnN0IGtleSA9IHRyaW0odmFsdWUuc3Vic3RyaW5nKDAsIGluZGV4KSk7XG4gICAgY29uc3QgdmFsID0gdHJpbSh2YWx1ZS5zdWJzdHJpbmcoaW5kZXggKyAxKSk7XG5cbiAgICBpZiAoa2V5KSB7XG4gICAgICBoZWFkZXJzW2tleV0gPSAoaGVhZGVyc1trZXldID8gYCR7IGhlYWRlcnNba2V5XSB9LCBgIDogJycpICsgdmFsO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGhlYWRlcnM7XG59O1xuIiwiaW1wb3J0IHtcbiAgaXNPYmplY3QsXG4gIHRvU3RyaW5nVGFnXG59IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBub3RUb1RyYW5zZm9ybSA9IFsnRm9ybURhdGEnLCAnRmlsZScsICdCbG9iJywgJ0FycmF5QnVmZmVyJywgJ1N0cmluZycsICdOdW1iZXInXTtcbmNvbnN0IHdpdGhvdXRCb2R5ID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnXTtcblxuZXhwb3J0IGRlZmF1bHQgKGRhdGEsIG1ldGhvZCwgaGVhZGVycykgPT4ge1xuICBpZiAod2l0aG91dEJvZHkuaW5kZXhPZihtZXRob2QpICE9PSAtMSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGlzT2JqZWN0KGRhdGEpICYmIG5vdFRvVHJhbnNmb3JtLmluZGV4T2YodG9TdHJpbmdUYWcoZGF0YSkpID09PSAtMSkge1xuICAgIGlmICghaGVhZGVyc1snQ29udGVudC1UeXBlJ10pIHtcbiAgICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuIiwiaW1wb3J0IEFqYXhlciBmcm9tICcuL2xpYi9BamF4ZXInO1xuXG53aW5kb3cuQWpheGVyID0gQWpheGVyO1xuIl0sIm5hbWVzIjpbInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImlzRnVuY3Rpb24iLCJpc09iamVjdCIsImlzUHJpbWl0aXZlIiwidGVzdCIsImlzU3RyaW5nIiwiYXNzaWduIiwidGFyZ2V0Iiwib2JqZWN0cyIsInNvdXJjZSIsImtleSIsIml0ZXJhdGUiLCJvYmplY3QiLCJjYWxsYmFjayIsImFycmF5IiwiaXNBcnJheSIsIml0ZXJhdGVkIiwibGVuZ3RoIiwiaGFzT3duUHJvcGVydHkiLCJtYXAiLCJuZXdPYmplY3QiLCJ0cmltIiwic3RyaW5nIiwicmVwbGFjZSIsIndoaXRlU3BhY2UiLCJyZXBsYWNlU3RyaW5nIiwic3RyaW5nVG9SZXBsYWNlIiwicmVwbGFjZW1lbnQiLCJzcGxpdCIsImpvaW4iLCJkZWVwQ2xvbmUiLCJjbG9uZSIsImRlZXBBc3NpZ24iLCJoYXNPd24iLCJwcm9wZXJ0eSIsImlzQWJzb2x1dGUiLCJ1cmwiLCJhYnNvbHV0ZVVSTFJlZ2V4cCIsImVuY29kZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInF1ZXJ5U3dpdGNoZXIiLCJxdWVyeSIsInByZWZpeCIsInF1ZXJ5UGFyYW1zIiwicHVzaCIsInBhcmFtIiwiU3RyaW5nIiwiZW1wdHlBcnJheSIsImZldGNoQmVmb3JlTWlkZGxld2FyZSIsImNvbmZpZyIsImJhc2VVUkwiLCJkYXRhIiwiaGVhZGVycyIsIm1ldGhvZCIsInBhcmFtcyIsIk1FVEhPRCIsInRvVXBwZXJDYXNlIiwiY29uc3RydWN0VVJMIiwidHJhbnNmb3JtRGF0YSIsIkFycmF5IiwiVVJMIiwiaW5kZXhPZiIsInBvc3RmaXgiLCJyYXdIZWFkZXJzIiwiaW5kZXgiLCJzdWJzdHJpbmciLCJ2YWwiLCJub3RUb1RyYW5zZm9ybSIsIndpdGhvdXRCb2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRlZmF1bHRzIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJ1cGxvYWRNZXRob2RzIiwiUHJvbWlzZSIsIkFqYXhlciIsImFqYXhlciIsInJlcXVlc3QiLCJhcHBseSIsImFyZ3VtZW50cyIsImNvbmYiLCJiZWZvcmUiLCJkZWZpbmVQcm9wZXJ0eSIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUHJvbWlzZUNsYXNzIiwibWlkZGxld2FyZSIsImFmdGVyQWxsIiwiYWZ0ZXIiLCJ0aGlzIiwiJCQiLCJ1bnNoaWZ0IiwiYmVmb3JlQWxsIiwidW5kZWZpbmVkIiwiaGVhZGVyIiwiZGF0YUNvbmZpZyIsInVybENvbmZpZyIsInhociIsInByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsImVyciIsInJlamVjdCIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwib25wcm9ncmVzcyIsInJlc3BvbnNlVHlwZSIsInRpbWVvdXQiLCJ3aXRoQ3JlZGVudGlhbHMiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwidXBsb2FkIiwib25hYm9ydCIsImVycm9yIiwiRXJyb3IiLCJ0eXBlIiwib25lcnJvciIsIm9udGltZW91dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInN0YXR1cyIsInJlYWR5U3RhdGUiLCJyZXNwb25zZSIsInJlc3BvbnNlVGV4dCIsInBhcnNlSGVhZGVycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInN0YXR1c1RleHQiLCJjYXRjaCIsImUiLCJzZW5kIiwiYWJvcnQiLCJGdW5jdGlvbiJdLCJtYXBwaW5ncyI6IndCQUtBLFNBRWdCQSxHQUFZQyxTQUNuQkMsR0FDSkMsS0FBS0YsR0FDTEcsTUFBTSxHQUFHLEdBT2QsUUFBZ0JDLEdBQVdKLFNBQ0Qsa0JBQVZBLElBQStDLGFBQXZCRCxFQUFZQyxHQUdwRCxRQUFnQkssR0FBU0wsNkJBQ1RBLGlCQUFB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"}