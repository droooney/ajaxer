{"version":3,"file":"ajaxer.min.js","sources":["../lib/utils.js","../lib/constructURL.js","../lib/parseHeaders.js","../lib/transformData.js","../lib/Ajaxer.js","../browser.js"],"sourcesContent":["const {\n  hasOwnProperty,\n  toString\n} = {};\nconst whiteSpace = /^\\s*|\\s*$/g;\nconst primitive = /^(number|string|boolean|symbol|undefined)$/;\n\nexport function toStringTag(value) {\n  return toString\n    .call(value)\n    .slice(8, -1);\n}\n\nexport const isArray = Array.isArray || ((value) => (\n  toStringTag(value) === 'Array'\n));\n\nexport function isFunction(value) {\n  return typeof value === 'function' || toStringTag(value) === 'Function';\n}\n\nexport function isObject(value) {\n  return typeof value && (typeof value === 'object' || isFunction(value));\n}\n\nexport function isPrimitive(value) {\n  return value === null || /^(number|string|boolean|symbol|undefined)$/.test(typeof value);\n}\n\nexport function isString(value) {\n  return toStringTag(value) === 'String';\n}\n\nexport function assign(target, ...objects) {\n  iterate(objects, (source) => {\n    iterate(source, (value, key) => {\n      target[key] = value;\n    });\n  });\n\n  return target;\n}\n\nexport function iterate(object, callback) {\n  const array = isArray(object);\n\n  let iterated = 0;\n  const { length } = object || {};\n\n  for (const key in object) {\n    if (hasOwnProperty.call(object, key)) {\n      if (array && iterated++ >= length) {\n        break;\n      }\n\n      callback(object[key], array ? +key : key, object);\n    }\n  }\n}\n\nexport function map(object, callback) {\n  const newObject = isArray(object)\n    ? []\n    : {};\n\n  iterate(object, (value, key) => {\n    newObject[key] = callback(value, key, object);\n  });\n\n  return newObject;\n}\n\nexport function trim(string) {\n  return string.replace(whiteSpace, '');\n}\n\nexport function replaceString(string, stringToReplace, replacement) {\n  return string\n    .split(stringToReplace)\n    .join(replacement);\n}\n\nexport function deepClone(object) {\n  if (isPrimitive(object) || isFunction(object)) {\n    return object;\n  }\n\n  const clone = isArray(object)\n    ? []\n    : {};\n\n  iterate(object, (value, key) => {\n    clone[key] = deepClone(value);\n  });\n\n  return clone;\n}\n\nexport function deepAssign(target, ...objects) {\n  iterate(objects, (object) => {\n    iterate(object, (object, key) => {\n      if (isPrimitive(object) || !hasOwnProperty.call(target, key)) {\n        target[key] = deepClone(object);\n\n        return;\n      }\n\n      if (!isPrimitive(target[key])) {\n        deepAssign(target[key], object);\n      }\n    });\n  });\n\n  return target;\n}\n\nexport function hasOwn(object, property) {\n  return hasOwnProperty.call(object, property);\n}\n","import {\n  isArray,\n  isObject,\n  iterate,\n  map,\n  replaceString\n} from './utils';\n\nconst absoluteURLRegexp = /^(([a-z][a-z\\d+\\-.]*:)?\\/\\/|data:[a-z]+\\/[a-z]+;base64,)/i;\nconst emptyArray = [];\n\nexport default (baseURL, url, params, query) => {\n  let URL = isAbsolute(url)\n    ? url\n    : `${ String(baseURL).replace(/\\/+$/, '') }/${ String(url).replace(/^\\/+/, '') }`;\n\n  iterate(params, (value, param) => {\n    URL = replaceString(URL, `:${ param }`, encode(value));\n  });\n\n  const queryParams = querySwitcher(query, '');\n\n  if (queryParams.length) {\n    const prefix = URL.indexOf('?') === -1 ? '?' : '&';\n    const postfix = map(queryParams, ({ param, value }) => (\n      `${ encode(param) }=${ encode(value) }`\n    )).join('&');\n\n    URL += prefix + postfix;\n  }\n\n  return URL;\n};\n\nfunction isAbsolute(url) {\n  return absoluteURLRegexp.test(url);\n}\n\nfunction encode(string) {\n  return encodeURIComponent(string);\n}\n\nfunction querySwitcher(query, prefix) {\n  /* eslint indent: 0 */\n  switch (true) {\n    case isArray(query): {\n      const queryParams = [];\n\n      iterate(query, (value) => {\n        if (isObject(value)) {\n          return queryParams.push(...querySwitcher(value, `${ prefix }[]`));\n        }\n\n        queryParams.push({\n          param: `${ prefix }[]`,\n          value\n        });\n      });\n\n      return queryParams;\n    }\n\n    case isObject(query): {\n      const queryParams = [];\n\n      iterate(query, (value, param) => {\n        if (isObject(value)) {\n          queryParams.push(...querySwitcher(value, prefix ? `${ prefix }[${ param }]` : param));\n\n          return;\n        }\n\n        queryParams.push({\n          param: prefix ? `${ prefix }[${ param }]` : param,\n          value: String(value)\n        });\n      });\n\n      return queryParams;\n    }\n\n    default: {\n      return emptyArray;\n    }\n  }\n}\n","import {\n  iterate,\n  trim\n} from './utils';\n\nexport default (rawHeaders) => {\n  const headers = {};\n\n  iterate((rawHeaders || '').split('\\n'), (value) => {\n    const index = value.indexOf(':');\n    const key = trim(value.substring(0, index));\n    const val = trim(value.substring(index + 1));\n\n    if (key) {\n      headers[key] = (headers[key] ? `${ headers[key] }, ` : '') + val;\n    }\n  });\n\n  return headers;\n};\n","import {\n  isObject,\n  toStringTag\n} from './utils';\n\nconst notToTransform = ['FormData', 'File', 'Blob', 'ArrayBuffer', 'String', 'Number'];\nconst withoutBody = ['DELETE', 'GET', 'HEAD'];\n\nexport default (data, method, headers) => {\n  if (withoutBody.indexOf(method) !== -1) {\n    return null;\n  }\n\n  if (isObject(data) && notToTransform.indexOf(toStringTag(data)) === -1) {\n    if (!headers['Content-Type']) {\n      headers['Content-Type'] = 'application/json;charset=utf-8';\n    }\n\n    return JSON.stringify(data);\n  }\n\n  return data;\n};\n","import {\n  isFunction,\n  isString,\n  assign,\n  iterate,\n  deepAssign,\n  deepClone,\n  hasOwn\n} from './utils';\n\nimport constructURL from './constructURL';\nimport parseHeaders from './parseHeaders';\nimport transformData from './transformData';\n\n/**\n * @typedef {'get'|'post'|'delete'|'head'|'put'|'patch'} AjaxerMethod\n * @public\n */\n\n/**\n * @typedef {Object} AjaxerConfig\n * @public\n * @property {Array.<AjaxerAfterMiddleware|AjaxerErrorAfterMiddleware>} [after]\n * @property {Object} [auth]\n * @property {String} [auth.username]\n * @property {String} [auth.password]\n * @property {String} [baseURL]\n * @property {Array.<AjaxerBeforeMiddleware|AjaxerErrorBeforeMiddleware>} [before]\n * @property {*} [data]\n * @property {Object.<String, String>} [headers]\n * @property {AjaxerMethod} [method]\n * @property {Object} [params]\n * @property {Object} [query]\n * @property {String} [responseType]\n * @property {Number} [timeout]\n * @property {String} [url]\n * @property {Boolean} [withCredentials]\n */\n\n/**\n * @typedef {Object} AjaxerResponse\n * @public\n * @property {AjaxerConfig} config\n * @property {*} data\n * @property {Object.<String, String>} headers\n * @property {Number} status\n * @property {String} statusText\n * @property {XMLHttpRequest} xhr\n */\n\n/**\n * @callback AjaxerAfterMiddleware\n * @public\n * @param {AjaxerResponse} config - Ajaxer response.\n */\n\n/**\n * @callback AjaxerErrorAfterMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {AjaxerResponse} config - Ajaxer response.\n */\n\n/**\n * @callback AjaxerBeforeMiddleware\n * @public\n * @param {AjaxerConfig} config - Ajaxer config.\n */\n\n/**\n * @callback AjaxerErrorBeforeMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {AjaxerConfig} config - Ajaxer config.\n */\n\n/**\n * @callback AjaxerConfigFunction\n * @public\n * @param {AjaxerConfig} config\n */\n\nconst defaults = {\n  after: [],\n  auth: {\n    username: '',\n    password: ''\n  },\n  baseURL: window.location.origin,\n  before: [],\n  data: null,\n  headers: {},\n  method: 'get',\n  params: {},\n  query: {},\n  responseType: '',\n  timeout: 0,\n  url: '',\n  withCredentials: false\n};\nconst uploadMethods = ['POST', 'PUT'];\nlet Promise;\n\n/**\n * @class Ajaxer\n * @extends Function\n * @public\n * @param {AjaxerConfig} [config = {}] - Config to add.\n * @returns {Ajaxer} Instance of Ajaxer.\n * An instance of Ajaxer is a function that simply calls #request with the same arguments.\n * @description Class for fetching data.\n *\n * @example\n * const ajaxer = new Ajaxer();\n *\n * ajaxer('/data').then((res) => {\n *   console.log(res);\n * });\n */\nclass Ajaxer extends Function {\n  /**\n   * @method Ajaxer.usePromise\n   * @public\n   * @param {Promise} PromiseClass - Promise class to use.\n   */\n  static usePromise(PromiseClass) {\n    Promise = PromiseClass;\n  }\n\n  constructor(config = {}) {\n    super();\n\n    function ajaxer() {\n      return ajaxer.request.apply(ajaxer, arguments);\n    }\n\n    const conf = deepAssign({}, defaults, config);\n\n    /**\n     * @member {AjaxerConfig} Ajaxer#$$\n     * @type {AjaxerConfig}\n     * @public\n     * @description Ajaxer config.\n     */\n    Object.defineProperty(ajaxer, '$$', { value: conf });\n    Object.setPrototypeOf(ajaxer, Ajaxer.prototype);\n\n    return ajaxer;\n  }\n\n  /**\n   * @method Ajaxer#after\n   * @public\n   * @param {AjaxerAfterMiddleware|AjaxerErrorAfterMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [afterAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the end\" and falsey for \"to the beginning\".\n   * @returns {Ajaxer} Returns this.\n   * @description Middleware that is called after the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const ajaxer = new Ajaxer()\n   *   .after((err, res) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .after((res) => {\n   *     res.json = JSON.parse(res.data):\n   *   });\n   */\n  after(middleware, afterAll = true) {\n    const { after } = this.$$;\n\n    if (afterAll) {\n      after.push(middleware);\n    } else {\n      after.unshift(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#before\n   * @public\n   * @param {AjaxerBeforeMiddleware|AjaxerErrorBeforeMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [beforeAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the beginning\" and falsey for \"to the end\".\n   * @returns {Ajaxer} Returns this.\n   * @description Middleware that is called before the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const ajaxer = new Ajaxer()\n   *   .before((err, req) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .before((req) => {\n   *     if (req.url === '/veryLongRequest') {\n   *       req.timeout = 30000;\n   *     }\n   *   });\n   */\n  before(middleware, beforeAll = true) {\n    const { before } = this.$$;\n\n    if (beforeAll) {\n      before.unshift(middleware);\n    } else {\n      before.push(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#config\n   * @public\n   * @param {String|AjaxerConfig|AjaxerConfigFunction} [property] - If it's a function\n   * it's called with the fetch config argument, if it's a string the value argument\n   * is used for assigning this property to the fetch config\n   * otherwise it's assigned to the fetch config.\n   * @param {*} [value] - See the property argument.\n   * @returns {Ajaxer|AjaxerConfig} If the argument is present this is returned otherwise the fetch config is returned.\n   * @description Method for getting and setting config.\n   *\n   * @example\n   * const ajaxer = new Ajaxer();\n   *\n   * ajaxer.config({ timeout: 5000 });\n   * ajaxer.config().timeout; // 5000\n   *\n   * ajaxer.config((config) => {\n   *   config.baseURL += '/api';\n   * });\n   */\n  config(property, value) {\n    const config = this.$$;\n\n    if (!arguments.length) {\n      return config;\n    }\n\n    if (isFunction(property)) {\n      property(config);\n    } else {\n      if (arguments.length >= 2) {\n        property = { [property]: value };\n      }\n\n      deepAssign(config, property);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#delete\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for delete requests.\n   *\n   * @example\n   * ajaxer.delete('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  delete(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'delete' }, config));\n  }\n\n  /**\n   * @method Ajaxer#get\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for get requests.\n   *\n   * @example\n   * ajaxer.get('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  get(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'get' }, config));\n  }\n\n  /**\n   * @method Ajaxer#head\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.head('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  head(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'head' }, config));\n  }\n\n  /**\n   * @method Ajaxer#headers\n   * @public\n   * @param {String|Object.<String, String>} header - A header string or an object of the following format:\n   * { [header]: [value1, value2, ...] }.\n   * @param {String} [value] - Header value. If the first argument is a string\n   * this has to be a header value.\n   * @returns {Ajaxer} Returns this.\n   * @description Method for setting request headers.\n   *\n   * @example\n   * ajaxer\n   *   .headers('My-Header', 'Value')\n   *   .headers({\n   *     'My-Another-Header': 'Value2'\n   *   });\n   */\n  headers(header, value) {\n    const { headers } = this.$$;\n\n    if (arguments.length >= 2) {\n      header = { [header]: value };\n    }\n\n    iterate(header, (value, header) => {\n      headers[header] = value;\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#instance\n   * @public\n   * @param {AjaxerConfig} [config] - New config if needed.\n   * @returns {Ajaxer} New instance of Ajaxer.\n   * @description Method for creating new ajaxer instances based on already existent.\n   *\n   * @example\n   * const mainAjaxer = new Ajaxer({\n   *   baseURL: '//other.domain.com/api',\n   *   withCredentials: true\n   * });\n   *\n   * const longAjaxer = mainAjaxer.instance({\n   *   timeout: 10000\n   * });\n   */\n  instance(config = {}) {\n    const dataConfig = hasOwn(config, 'data')\n      ? { data: config.data }\n      : {};\n\n    delete config.data;\n\n    const conf = assign(\n      deepAssign({}, this.$$, config),\n      dataConfig\n    );\n\n    return new Ajaxer(conf);\n  }\n\n  /**\n   * @method Ajaxer#patch\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.patch('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  patch(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'patch', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#post\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.post('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  post(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'post', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#put\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.put('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  put(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'put', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#request\n   * @public\n   * @param {String} [url] - URL for the request.\n   * @param {AjaxerConfig} [config] - Additional config for this particular request.\n   * @returns {Promise.<AjaxerResponse, Error>} Promise that is resolved with the request response.\n   * @description Main function for making requests. All request methods call this method\n   * including the fetch instance itself.\n   *\n   * @example\n   * ajaxer.request('/data', { timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * ajaxer.request({ timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * ajaxer.request().then((res) => {\n   *   console.log(res);\n   * });\n   */\n  request(url, config = {}) {\n    if (arguments.length === 1 && !isString(url)) {\n      config = url;\n    }\n\n    const dataConfig = hasOwn(config, 'data')\n      ? { data: config.data }\n      : {};\n    const urlConfig = isString(url)\n      ? { url }\n      : {};\n\n    delete config.data;\n\n    const conf = assign(\n      deepAssign(\n        deepClone(this.$$),\n        urlConfig,\n        config\n      ),\n      dataConfig\n    );\n\n    let xhr;\n    let promise = Promise.resolve();\n\n    iterate(conf.before, (middleware) => {\n      promise = promise.then(() => {\n        if (middleware.length >= 2) {\n          return Promise.resolve();\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(conf));\n        });\n      }, (err) => {\n        if (middleware.length < 2) {\n          return Promise.reject(err);\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(err, conf));\n        });\n      });\n    });\n\n    promise = promise.then(() => new Promise((resolve, reject) => {\n      const {\n        after,\n        auth: {\n          username,\n          password\n        },\n        baseURL,\n        data,\n        headers,\n        method,\n        onprogress,\n        params,\n        query,\n        responseType,\n        timeout,\n        url,\n        withCredentials\n      } = conf;\n      const eventualMethod = method.toUpperCase();\n      const eventualURL = constructURL(baseURL, url, params, query);\n      const eventualData = transformData(data, eventualMethod, headers);\n\n      xhr = new XMLHttpRequest();\n\n      xhr.open(eventualMethod, eventualURL, true, username, password);\n\n      iterate(headers, (value, header) => {\n        xhr.setRequestHeader(header, value);\n      });\n\n      if (onprogress) {\n        if (uploadMethods.indexOf(method) === -1) {\n          xhr.onprogress = onprogress;\n        } else {\n          xhr.upload.onprogress = onprogress;\n        }\n      }\n\n      xhr.onabort = () => {\n        const error = new Error('Request was aborted');\n\n        error.type = 'ABORT_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.onerror = () => {\n        const error = new Error('Network error');\n\n        error.type = 'NETWORK_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.ontimeout = () => {\n        const error = new Error('Request time exceeded');\n\n        error.type = 'TIMEOUT_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.onreadystatechange = () => {\n        if (!xhr || !xhr.status || xhr.readyState !== 4) {\n          return;\n        }\n\n        const response = {\n          config: conf,\n          data: !responseType || responseType === 'text' ? xhr.responseText : xhr.response,\n          headers: parseHeaders(xhr.getAllResponseHeaders()),\n          status: xhr.status === 1223 ? 204 : xhr.status,\n          statusText: xhr.status === 1223 ? 'No Content' : xhr.statusText,\n          xhr\n        };\n\n        let promise = Promise.resolve();\n\n        iterate(after, (middleware) => {\n          promise = promise.then(() => {\n            if (middleware.length >= 2) {\n              return Promise.resolve();\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(response));\n            });\n          }, (err) => {\n            if (middleware.length < 2) {\n              return Promise.reject(err);\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(err, response));\n            });\n          });\n        });\n\n        resolve(promise\n          .then(() => response)\n          .catch((err) => {\n            try {\n              err.response = response;\n            } catch (e) {\n              throw err;\n            }\n\n            throw err;\n          })\n        );\n      };\n\n      xhr.responseType = responseType;\n      xhr.timeout = +timeout || 0;\n      xhr.withCredentials = !!withCredentials;\n\n      xhr.send(eventualData);\n    }));\n\n    promise.abort = function abort() {\n      if (xhr) {\n        xhr.abort();\n      }\n\n      return this;\n    };\n\n    return promise;\n  }\n}\n\n/**\n * @const {Ajaxer} ajaxer\n * @type {Ajaxer}\n * @public\n * @description Empty instance of Ajaxer.\n */\nconst ajaxer = new Ajaxer();\n\nexport default Ajaxer;\nexport { Ajaxer, ajaxer };\n","import Ajaxer, { ajaxer } from './lib/Ajaxer';\n\nwindow.Ajaxer = Ajaxer;\nwindow.ajaxer = ajaxer;\n"],"names":["toStringTag","value","toString","call","slice","isFunction","isObject","isPrimitive","test","isString","assign","target","objects","source","key","iterate","object","callback","array","isArray","iterated","length","hasOwnProperty","map","newObject","trim","string","replace","whiteSpace","replaceString","stringToReplace","replacement","split","join","deepClone","clone","deepAssign","hasOwn","property","isAbsolute","url","absoluteURLRegexp","encode","encodeURIComponent","querySwitcher","query","prefix","queryParams","push","param","String","emptyArray","Array","baseURL","params","URL","indexOf","postfix","rawHeaders","headers","index","substring","val","notToTransform","withoutBody","data","method","JSON","stringify","defaults","window","location","origin","uploadMethods","Promise","Ajaxer","ajaxer","request","apply","arguments","config","conf","defineProperty","setPrototypeOf","prototype","PromiseClass","middleware","afterAll","after","this","$$","unshift","beforeAll","before","undefined","header","dataConfig","urlConfig","xhr","promise","resolve","then","err","reject","auth","username","password","onprogress","responseType","timeout","withCredentials","eventualMethod","toUpperCase","eventualURL","constructURL","eventualData","transformData","XMLHttpRequest","open","setRequestHeader","upload","onabort","error","Error","type","onerror","ontimeout","onreadystatechange","status","readyState","response","responseText","parseHeaders","getAllResponseHeaders","statusText","catch","e","send","abort","Function"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWpheGVyLmpzIiwic291cmNlcyI6WyIuLi9saWIvdXRpbHMuanMiLCIuLi9saWIvY29uc3RydWN0VVJMLmpzIiwiLi4vbGliL3BhcnNlSGVhZGVycy5qcyIsIi4uL2xpYi90cmFuc2Zvcm1EYXRhLmpzIiwiLi4vbGliL0FqYXhlci5qcyIsIi4uL2Jyb3dzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICBoYXNPd25Qcm9wZXJ0eSxcbiAgdG9TdHJpbmdcbn0gPSB7fTtcbmNvbnN0IHdoaXRlU3BhY2UgPSAvXlxccyp8XFxzKiQvZztcbmNvbnN0IHByaW1pdGl2ZSA9IC9eKG51bWJlcnxzdHJpbmd8Ym9vbGVhbnxzeW1ib2x8dW5kZWZpbmVkKSQvO1xuXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmdUYWcodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nXG4gICAgLmNhbGwodmFsdWUpXG4gICAgLnNsaWNlKDgsIC0xKTtcbn1cblxuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8ICgodmFsdWUpID0+IChcbiAgdG9TdHJpbmdUYWcodmFsdWUpID09PSAnQXJyYXknXG4pKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0b1N0cmluZ1RhZyh2YWx1ZSkgPT09ICdGdW5jdGlvbic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnIHx8IGlzRnVuY3Rpb24odmFsdWUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCAvXihudW1iZXJ8c3RyaW5nfGJvb2xlYW58c3ltYm9sfHVuZGVmaW5lZCkkLy50ZXN0KHR5cGVvZiB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmdUYWcodmFsdWUpID09PSAnU3RyaW5nJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIC4uLm9iamVjdHMpIHtcbiAgaXRlcmF0ZShvYmplY3RzLCAoc291cmNlKSA9PiB7XG4gICAgaXRlcmF0ZShzb3VyY2UsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZShvYmplY3QsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGFycmF5ID0gaXNBcnJheShvYmplY3QpO1xuXG4gIGxldCBpdGVyYXRlZCA9IDA7XG4gIGNvbnN0IHsgbGVuZ3RoIH0gPSBvYmplY3QgfHwge307XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICBpZiAoYXJyYXkgJiYgaXRlcmF0ZWQrKyA+PSBsZW5ndGgpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKG9iamVjdFtrZXldLCBhcnJheSA/ICtrZXkgOiBrZXksIG9iamVjdCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXAob2JqZWN0LCBjYWxsYmFjaykge1xuICBjb25zdCBuZXdPYmplY3QgPSBpc0FycmF5KG9iamVjdClcbiAgICA/IFtdXG4gICAgOiB7fTtcblxuICBpdGVyYXRlKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICBuZXdPYmplY3Rba2V5XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCk7XG4gIH0pO1xuXG4gIHJldHVybiBuZXdPYmplY3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmltKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uod2hpdGVTcGFjZSwgJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZVN0cmluZyhzdHJpbmcsIHN0cmluZ1RvUmVwbGFjZSwgcmVwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHN0cmluZ1xuICAgIC5zcGxpdChzdHJpbmdUb1JlcGxhY2UpXG4gICAgLmpvaW4ocmVwbGFjZW1lbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVlcENsb25lKG9iamVjdCkge1xuICBpZiAoaXNQcmltaXRpdmUob2JqZWN0KSB8fCBpc0Z1bmN0aW9uKG9iamVjdCkpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgY29uc3QgY2xvbmUgPSBpc0FycmF5KG9iamVjdClcbiAgICA/IFtdXG4gICAgOiB7fTtcblxuICBpdGVyYXRlKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICBjbG9uZVtrZXldID0gZGVlcENsb25lKHZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNsb25lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVlcEFzc2lnbih0YXJnZXQsIC4uLm9iamVjdHMpIHtcbiAgaXRlcmF0ZShvYmplY3RzLCAob2JqZWN0KSA9PiB7XG4gICAgaXRlcmF0ZShvYmplY3QsIChvYmplY3QsIGtleSkgPT4ge1xuICAgICAgaWYgKGlzUHJpbWl0aXZlKG9iamVjdCkgfHwgIWhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gZGVlcENsb25lKG9iamVjdCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzUHJpbWl0aXZlKHRhcmdldFtrZXldKSkge1xuICAgICAgICBkZWVwQXNzaWduKHRhcmdldFtrZXldLCBvYmplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iamVjdCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG59XG4iLCJpbXBvcnQge1xuICBpc0FycmF5LFxuICBpc09iamVjdCxcbiAgaXRlcmF0ZSxcbiAgbWFwLFxuICByZXBsYWNlU3RyaW5nXG59IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBhYnNvbHV0ZVVSTFJlZ2V4cCA9IC9eKChbYS16XVthLXpcXGQrXFwtLl0qOik/XFwvXFwvfGRhdGE6W2Etel0rXFwvW2Etel0rO2Jhc2U2NCwpL2k7XG5jb25zdCBlbXB0eUFycmF5ID0gW107XG5cbmV4cG9ydCBkZWZhdWx0IChiYXNlVVJMLCB1cmwsIHBhcmFtcywgcXVlcnkpID0+IHtcbiAgbGV0IFVSTCA9IGlzQWJzb2x1dGUodXJsKVxuICAgID8gdXJsXG4gICAgOiBgJHsgU3RyaW5nKGJhc2VVUkwpLnJlcGxhY2UoL1xcLyskLywgJycpIH0vJHsgU3RyaW5nKHVybCkucmVwbGFjZSgvXlxcLysvLCAnJykgfWA7XG5cbiAgaXRlcmF0ZShwYXJhbXMsICh2YWx1ZSwgcGFyYW0pID0+IHtcbiAgICBVUkwgPSByZXBsYWNlU3RyaW5nKFVSTCwgYDokeyBwYXJhbSB9YCwgZW5jb2RlKHZhbHVlKSk7XG4gIH0pO1xuXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcXVlcnlTd2l0Y2hlcihxdWVyeSwgJycpO1xuXG4gIGlmIChxdWVyeVBhcmFtcy5sZW5ndGgpIHtcbiAgICBjb25zdCBwcmVmaXggPSBVUkwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJztcbiAgICBjb25zdCBwb3N0Zml4ID0gbWFwKHF1ZXJ5UGFyYW1zLCAoeyBwYXJhbSwgdmFsdWUgfSkgPT4gKFxuICAgICAgYCR7IGVuY29kZShwYXJhbSkgfT0keyBlbmNvZGUodmFsdWUpIH1gXG4gICAgKSkuam9pbignJicpO1xuXG4gICAgVVJMICs9IHByZWZpeCArIHBvc3RmaXg7XG4gIH1cblxuICByZXR1cm4gVVJMO1xufTtcblxuZnVuY3Rpb24gaXNBYnNvbHV0ZSh1cmwpIHtcbiAgcmV0dXJuIGFic29sdXRlVVJMUmVnZXhwLnRlc3QodXJsKTtcbn1cblxuZnVuY3Rpb24gZW5jb2RlKHN0cmluZykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZyk7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5U3dpdGNoZXIocXVlcnksIHByZWZpeCkge1xuICAvKiBlc2xpbnQgaW5kZW50OiAwICovXG4gIHN3aXRjaCAodHJ1ZSkge1xuICAgIGNhc2UgaXNBcnJheShxdWVyeSk6IHtcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gW107XG5cbiAgICAgIGl0ZXJhdGUocXVlcnksICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zLnB1c2goLi4ucXVlcnlTd2l0Y2hlcih2YWx1ZSwgYCR7IHByZWZpeCB9W11gKSk7XG4gICAgICAgIH1cblxuICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKHtcbiAgICAgICAgICBwYXJhbTogYCR7IHByZWZpeCB9W11gLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgICB9XG5cbiAgICBjYXNlIGlzT2JqZWN0KHF1ZXJ5KToge1xuICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBbXTtcblxuICAgICAgaXRlcmF0ZShxdWVyeSwgKHZhbHVlLCBwYXJhbSkgPT4ge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMucHVzaCguLi5xdWVyeVN3aXRjaGVyKHZhbHVlLCBwcmVmaXggPyBgJHsgcHJlZml4IH1bJHsgcGFyYW0gfV1gIDogcGFyYW0pKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goe1xuICAgICAgICAgIHBhcmFtOiBwcmVmaXggPyBgJHsgcHJlZml4IH1bJHsgcGFyYW0gfV1gIDogcGFyYW0sXG4gICAgICAgICAgdmFsdWU6IFN0cmluZyh2YWx1ZSlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaXRlcmF0ZSxcbiAgdHJpbVxufSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgKHJhd0hlYWRlcnMpID0+IHtcbiAgY29uc3QgaGVhZGVycyA9IHt9O1xuXG4gIGl0ZXJhdGUoKHJhd0hlYWRlcnMgfHwgJycpLnNwbGl0KCdcXG4nKSwgKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgaW5kZXggPSB2YWx1ZS5pbmRleE9mKCc6Jyk7XG4gICAgY29uc3Qga2V5ID0gdHJpbSh2YWx1ZS5zdWJzdHJpbmcoMCwgaW5kZXgpKTtcbiAgICBjb25zdCB2YWwgPSB0cmltKHZhbHVlLnN1YnN0cmluZyhpbmRleCArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGhlYWRlcnNba2V5XSA9IChoZWFkZXJzW2tleV0gPyBgJHsgaGVhZGVyc1trZXldIH0sIGAgOiAnJykgKyB2YWw7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaGVhZGVycztcbn07XG4iLCJpbXBvcnQge1xuICBpc09iamVjdCxcbiAgdG9TdHJpbmdUYWdcbn0gZnJvbSAnLi91dGlscyc7XG5cbmNvbnN0IG5vdFRvVHJhbnNmb3JtID0gWydGb3JtRGF0YScsICdGaWxlJywgJ0Jsb2InLCAnQXJyYXlCdWZmZXInLCAnU3RyaW5nJywgJ051bWJlciddO1xuY29uc3Qgd2l0aG91dEJvZHkgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCddO1xuXG5leHBvcnQgZGVmYXVsdCAoZGF0YSwgbWV0aG9kLCBoZWFkZXJzKSA9PiB7XG4gIGlmICh3aXRob3V0Qm9keS5pbmRleE9mKG1ldGhvZCkgIT09IC0xKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoaXNPYmplY3QoZGF0YSkgJiYgbm90VG9UcmFuc2Zvcm0uaW5kZXhPZih0b1N0cmluZ1RhZyhkYXRhKSkgPT09IC0xKSB7XG4gICAgaWYgKCFoZWFkZXJzWydDb250ZW50LVR5cGUnXSkge1xuICAgICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JztcbiAgICB9XG5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn07XG4iLCJpbXBvcnQge1xuICBpc0Z1bmN0aW9uLFxuICBpc1N0cmluZyxcbiAgYXNzaWduLFxuICBpdGVyYXRlLFxuICBkZWVwQXNzaWduLFxuICBkZWVwQ2xvbmUsXG4gIGhhc093blxufSBmcm9tICcuL3V0aWxzJztcblxuaW1wb3J0IGNvbnN0cnVjdFVSTCBmcm9tICcuL2NvbnN0cnVjdFVSTCc7XG5pbXBvcnQgcGFyc2VIZWFkZXJzIGZyb20gJy4vcGFyc2VIZWFkZXJzJztcbmltcG9ydCB0cmFuc2Zvcm1EYXRhIGZyb20gJy4vdHJhbnNmb3JtRGF0YSc7XG5cbi8qKlxuICogQHR5cGVkZWYgeydnZXQnfCdwb3N0J3wnZGVsZXRlJ3wnaGVhZCd8J3B1dCd8J3BhdGNoJ30gQWpheGVyTWV0aG9kXG4gKiBAcHVibGljXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBamF4ZXJDb25maWdcbiAqIEBwdWJsaWNcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEFqYXhlckFmdGVyTWlkZGxld2FyZXxBamF4ZXJFcnJvckFmdGVyTWlkZGxld2FyZT59IFthZnRlcl1cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbYXV0aF1cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbYXV0aC51c2VybmFtZV1cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbYXV0aC5wYXNzd29yZF1cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbYmFzZVVSTF1cbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEFqYXhlckJlZm9yZU1pZGRsZXdhcmV8QWpheGVyRXJyb3JCZWZvcmVNaWRkbGV3YXJlPn0gW2JlZm9yZV1cbiAqIEBwcm9wZXJ0eSB7Kn0gW2RhdGFdXG4gKiBAcHJvcGVydHkge09iamVjdC48U3RyaW5nLCBTdHJpbmc+fSBbaGVhZGVyc11cbiAqIEBwcm9wZXJ0eSB7QWpheGVyTWV0aG9kfSBbbWV0aG9kXVxuICogQHByb3BlcnR5IHtPYmplY3R9IFtwYXJhbXNdXG4gKiBAcHJvcGVydHkge09iamVjdH0gW3F1ZXJ5XVxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtyZXNwb25zZVR5cGVdXG4gKiBAcHJvcGVydHkge051bWJlcn0gW3RpbWVvdXRdXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW3VybF1cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3dpdGhDcmVkZW50aWFsc11cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFqYXhlclJlc3BvbnNlXG4gKiBAcHVibGljXG4gKiBAcHJvcGVydHkge0FqYXhlckNvbmZpZ30gY29uZmlnXG4gKiBAcHJvcGVydHkgeyp9IGRhdGFcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxTdHJpbmcsIFN0cmluZz59IGhlYWRlcnNcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBzdGF0dXNcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBzdGF0dXNUZXh0XG4gKiBAcHJvcGVydHkge1hNTEh0dHBSZXF1ZXN0fSB4aHJcbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBBamF4ZXJBZnRlck1pZGRsZXdhcmVcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7QWpheGVyUmVzcG9uc2V9IGNvbmZpZyAtIEFqYXhlciByZXNwb25zZS5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBBamF4ZXJFcnJvckFmdGVyTWlkZGxld2FyZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtFcnJvcnwqfSBlcnIgLSBUaHJvd24gZXJyb3IuXG4gKiBAcGFyYW0ge0FqYXhlclJlc3BvbnNlfSBjb25maWcgLSBBamF4ZXIgcmVzcG9uc2UuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgQWpheGVyQmVmb3JlTWlkZGxld2FyZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtBamF4ZXJDb25maWd9IGNvbmZpZyAtIEFqYXhlciBjb25maWcuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgQWpheGVyRXJyb3JCZWZvcmVNaWRkbGV3YXJlXG4gKiBAcHVibGljXG4gKiBAcGFyYW0ge0Vycm9yfCp9IGVyciAtIFRocm93biBlcnJvci5cbiAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBjb25maWcgLSBBamF4ZXIgY29uZmlnLlxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIEFqYXhlckNvbmZpZ0Z1bmN0aW9uXG4gKiBAcHVibGljXG4gKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gY29uZmlnXG4gKi9cblxuY29uc3QgZGVmYXVsdHMgPSB7XG4gIGFmdGVyOiBbXSxcbiAgYXV0aDoge1xuICAgIHVzZXJuYW1lOiAnJyxcbiAgICBwYXNzd29yZDogJydcbiAgfSxcbiAgYmFzZVVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgYmVmb3JlOiBbXSxcbiAgZGF0YTogbnVsbCxcbiAgaGVhZGVyczoge30sXG4gIG1ldGhvZDogJ2dldCcsXG4gIHBhcmFtczoge30sXG4gIHF1ZXJ5OiB7fSxcbiAgcmVzcG9uc2VUeXBlOiAnJyxcbiAgdGltZW91dDogMCxcbiAgdXJsOiAnJyxcbiAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxufTtcbmNvbnN0IHVwbG9hZE1ldGhvZHMgPSBbJ1BPU1QnLCAnUFVUJ107XG5sZXQgUHJvbWlzZTtcblxuLyoqXG4gKiBAY2xhc3MgQWpheGVyXG4gKiBAZXh0ZW5kcyBGdW5jdGlvblxuICogQHB1YmxpY1xuICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWcgPSB7fV0gLSBDb25maWcgdG8gYWRkLlxuICogQHJldHVybnMge0FqYXhlcn0gSW5zdGFuY2Ugb2YgQWpheGVyLlxuICogQW4gaW5zdGFuY2Ugb2YgQWpheGVyIGlzIGEgZnVuY3Rpb24gdGhhdCBzaW1wbHkgY2FsbHMgI3JlcXVlc3Qgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMuXG4gKiBAZGVzY3JpcHRpb24gQ2xhc3MgZm9yIGZldGNoaW5nIGRhdGEuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IGFqYXhlciA9IG5ldyBBamF4ZXIoKTtcbiAqXG4gKiBhamF4ZXIoJy9kYXRhJykudGhlbigocmVzKSA9PiB7XG4gKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gKiB9KTtcbiAqL1xuY2xhc3MgQWpheGVyIGV4dGVuZHMgRnVuY3Rpb24ge1xuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIudXNlUHJvbWlzZVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7UHJvbWlzZX0gUHJvbWlzZUNsYXNzIC0gUHJvbWlzZSBjbGFzcyB0byB1c2UuXG4gICAqL1xuICBzdGF0aWMgdXNlUHJvbWlzZShQcm9taXNlQ2xhc3MpIHtcbiAgICBQcm9taXNlID0gUHJvbWlzZUNsYXNzO1xuICB9XG5cbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgZnVuY3Rpb24gYWpheGVyKCkge1xuICAgICAgcmV0dXJuIGFqYXhlci5yZXF1ZXN0LmFwcGx5KGFqYXhlciwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb25mID0gZGVlcEFzc2lnbih7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIHtBamF4ZXJDb25maWd9IEFqYXhlciMkJFxuICAgICAqIEB0eXBlIHtBamF4ZXJDb25maWd9XG4gICAgICogQHB1YmxpY1xuICAgICAqIEBkZXNjcmlwdGlvbiBBamF4ZXIgY29uZmlnLlxuICAgICAqL1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhamF4ZXIsICckJCcsIHsgdmFsdWU6IGNvbmYgfSk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGFqYXhlciwgQWpheGVyLnByb3RvdHlwZSk7XG5cbiAgICByZXR1cm4gYWpheGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2FmdGVyXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtBamF4ZXJBZnRlck1pZGRsZXdhcmV8QWpheGVyRXJyb3JBZnRlck1pZGRsZXdhcmV9IG1pZGRsZXdhcmUgLSBNaWRkbGV3YXJlIHRvIGFkZC5cbiAgICogQHBhcmFtIHtCb29sZWFufCp9IFthZnRlckFsbCA9IHRydWVdIC0gQm9vbGVhbiBwYXJhbWV0ZXIgd2hlcmUgdG8gcHV0IHRoZSBtaWRkbGV3YXJlLlxuICAgKiBUcnV0aHkgcGFyYW1ldGVyIHN0YW5kcyBmb3IgXCJ0byB0aGUgZW5kXCIgYW5kIGZhbHNleSBmb3IgXCJ0byB0aGUgYmVnaW5uaW5nXCIuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ9IFJldHVybnMgdGhpcy5cbiAgICogQGRlc2NyaXB0aW9uIE1pZGRsZXdhcmUgdGhhdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHJlcXVlc3QuXG4gICAqIElmIHRoZSBtaWRkbGV3YXJlIGhhcyAyIG9yIGxlc3MgYXJndW1lbnRzIGl0J3MgdHJlYXRlZCBhcyBzdWNjZXNzIG1pZGRsZXdhcmUgb3RoZXJ3aXNlIGFzIGFuIGVycm9yIG9uZS5cbiAgICogSWYgdGhlIG1pZGRsZXdhcmUgcmV0dXJucyBhIHByb21pc2UgaXQgYmVjb21lcyBhIHBhcnQgb2YgdGhlIG1pZGRsZXdhcmUgY2hhaW4uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGFqYXhlciA9IG5ldyBBamF4ZXIoKVxuICAgKiAgIC5hZnRlcigoZXJyLCByZXMpID0+IHtcbiAgICogICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAqXG4gICAqICAgICB0aHJvdyBlcnI7XG4gICAqICAgfSlcbiAgICogICAuYWZ0ZXIoKHJlcykgPT4ge1xuICAgKiAgICAgcmVzLmpzb24gPSBKU09OLnBhcnNlKHJlcy5kYXRhKTpcbiAgICogICB9KTtcbiAgICovXG4gIGFmdGVyKG1pZGRsZXdhcmUsIGFmdGVyQWxsID0gdHJ1ZSkge1xuICAgIGNvbnN0IHsgYWZ0ZXIgfSA9IHRoaXMuJCQ7XG5cbiAgICBpZiAoYWZ0ZXJBbGwpIHtcbiAgICAgIGFmdGVyLnB1c2gobWlkZGxld2FyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFmdGVyLnVuc2hpZnQobWlkZGxld2FyZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjYmVmb3JlXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtBamF4ZXJCZWZvcmVNaWRkbGV3YXJlfEFqYXhlckVycm9yQmVmb3JlTWlkZGxld2FyZX0gbWlkZGxld2FyZSAtIE1pZGRsZXdhcmUgdG8gYWRkLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW58Kn0gW2JlZm9yZUFsbCA9IHRydWVdIC0gQm9vbGVhbiBwYXJhbWV0ZXIgd2hlcmUgdG8gcHV0IHRoZSBtaWRkbGV3YXJlLlxuICAgKiBUcnV0aHkgcGFyYW1ldGVyIHN0YW5kcyBmb3IgXCJ0byB0aGUgYmVnaW5uaW5nXCIgYW5kIGZhbHNleSBmb3IgXCJ0byB0aGUgZW5kXCIuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ9IFJldHVybnMgdGhpcy5cbiAgICogQGRlc2NyaXB0aW9uIE1pZGRsZXdhcmUgdGhhdCBpcyBjYWxsZWQgYmVmb3JlIHRoZSByZXF1ZXN0LlxuICAgKiBJZiB0aGUgbWlkZGxld2FyZSBoYXMgMiBvciBsZXNzIGFyZ3VtZW50cyBpdCdzIHRyZWF0ZWQgYXMgc3VjY2VzcyBtaWRkbGV3YXJlIG90aGVyd2lzZSBhcyBhbiBlcnJvciBvbmUuXG4gICAqIElmIHRoZSBtaWRkbGV3YXJlIHJldHVybnMgYSBwcm9taXNlIGl0IGJlY29tZXMgYSBwYXJ0IG9mIHRoZSBtaWRkbGV3YXJlIGNoYWluLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBhamF4ZXIgPSBuZXcgQWpheGVyKClcbiAgICogICAuYmVmb3JlKChlcnIsIHJlcSkgPT4ge1xuICAgKiAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICpcbiAgICogICAgIHRocm93IGVycjtcbiAgICogICB9KVxuICAgKiAgIC5iZWZvcmUoKHJlcSkgPT4ge1xuICAgKiAgICAgaWYgKHJlcS51cmwgPT09ICcvdmVyeUxvbmdSZXF1ZXN0Jykge1xuICAgKiAgICAgICByZXEudGltZW91dCA9IDMwMDAwO1xuICAgKiAgICAgfVxuICAgKiAgIH0pO1xuICAgKi9cbiAgYmVmb3JlKG1pZGRsZXdhcmUsIGJlZm9yZUFsbCA9IHRydWUpIHtcbiAgICBjb25zdCB7IGJlZm9yZSB9ID0gdGhpcy4kJDtcblxuICAgIGlmIChiZWZvcmVBbGwpIHtcbiAgICAgIGJlZm9yZS51bnNoaWZ0KG1pZGRsZXdhcmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiZWZvcmUucHVzaChtaWRkbGV3YXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNjb25maWdcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xBamF4ZXJDb25maWd8QWpheGVyQ29uZmlnRnVuY3Rpb259IFtwcm9wZXJ0eV0gLSBJZiBpdCdzIGEgZnVuY3Rpb25cbiAgICogaXQncyBjYWxsZWQgd2l0aCB0aGUgZmV0Y2ggY29uZmlnIGFyZ3VtZW50LCBpZiBpdCdzIGEgc3RyaW5nIHRoZSB2YWx1ZSBhcmd1bWVudFxuICAgKiBpcyB1c2VkIGZvciBhc3NpZ25pbmcgdGhpcyBwcm9wZXJ0eSB0byB0aGUgZmV0Y2ggY29uZmlnXG4gICAqIG90aGVyd2lzZSBpdCdzIGFzc2lnbmVkIHRvIHRoZSBmZXRjaCBjb25maWcuXG4gICAqIEBwYXJhbSB7Kn0gW3ZhbHVlXSAtIFNlZSB0aGUgcHJvcGVydHkgYXJndW1lbnQuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ8QWpheGVyQ29uZmlnfSBJZiB0aGUgYXJndW1lbnQgaXMgcHJlc2VudCB0aGlzIGlzIHJldHVybmVkIG90aGVyd2lzZSB0aGUgZmV0Y2ggY29uZmlnIGlzIHJldHVybmVkLlxuICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIGZvciBnZXR0aW5nIGFuZCBzZXR0aW5nIGNvbmZpZy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgYWpheGVyID0gbmV3IEFqYXhlcigpO1xuICAgKlxuICAgKiBhamF4ZXIuY29uZmlnKHsgdGltZW91dDogNTAwMCB9KTtcbiAgICogYWpheGVyLmNvbmZpZygpLnRpbWVvdXQ7IC8vIDUwMDBcbiAgICpcbiAgICogYWpheGVyLmNvbmZpZygoY29uZmlnKSA9PiB7XG4gICAqICAgY29uZmlnLmJhc2VVUkwgKz0gJy9hcGknO1xuICAgKiB9KTtcbiAgICovXG4gIGNvbmZpZyhwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLiQkO1xuXG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHByb3BlcnR5KSkge1xuICAgICAgcHJvcGVydHkoY29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgICBwcm9wZXJ0eSA9IHsgW3Byb3BlcnR5XTogdmFsdWUgfTtcbiAgICAgIH1cblxuICAgICAgZGVlcEFzc2lnbihjb25maWcsIHByb3BlcnR5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNkZWxldGVcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBamF4ZXJSZXNwb25zZSwgRXJyb3I+fSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQGRlc2NyaXB0aW9uIFNob3J0aGFuZCBmb3IgI3JlcXVlc3QgZm9yIGRlbGV0ZSByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLmRlbGV0ZSgnL2RhdGEnKS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICovXG4gIGRlbGV0ZSh1cmwsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKCFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ2RlbGV0ZScgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjZ2V0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt1cmxdIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QWpheGVyUmVzcG9uc2UsIEVycm9yPn0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBkZXNjcmlwdGlvbiBTaG9ydGhhbmQgZm9yICNyZXF1ZXN0IGZvciBnZXQgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlci5nZXQoJy9kYXRhJykudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICBnZXQodXJsLCBjb25maWcgPSB7fSkge1xuICAgIGlmICghaXNTdHJpbmcodXJsKSkge1xuICAgICAgY29uZmlnID0gdXJsO1xuICAgICAgdXJsID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXJsLCBhc3NpZ24oeyBtZXRob2Q6ICdnZXQnIH0sIGNvbmZpZykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2hlYWRcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBamF4ZXJSZXNwb25zZSwgRXJyb3I+fSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQGRlc2NyaXB0aW9uIFNob3J0aGFuZCBmb3IgI3JlcXVlc3QgZm9yIGhlYWQgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlci5oZWFkKCcvZGF0YScpLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKi9cbiAgaGVhZCh1cmwsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKCFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ2hlYWQnIH0sIGNvbmZpZykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2hlYWRlcnNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3QuPFN0cmluZywgU3RyaW5nPn0gaGVhZGVyIC0gQSBoZWFkZXIgc3RyaW5nIG9yIGFuIG9iamVjdCBvZiB0aGUgZm9sbG93aW5nIGZvcm1hdDpcbiAgICogeyBbaGVhZGVyXTogW3ZhbHVlMSwgdmFsdWUyLCAuLi5dIH0uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIC0gSGVhZGVyIHZhbHVlLiBJZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYSBzdHJpbmdcbiAgICogdGhpcyBoYXMgdG8gYmUgYSBoZWFkZXIgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ9IFJldHVybnMgdGhpcy5cbiAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCBmb3Igc2V0dGluZyByZXF1ZXN0IGhlYWRlcnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlclxuICAgKiAgIC5oZWFkZXJzKCdNeS1IZWFkZXInLCAnVmFsdWUnKVxuICAgKiAgIC5oZWFkZXJzKHtcbiAgICogICAgICdNeS1Bbm90aGVyLUhlYWRlcic6ICdWYWx1ZTInXG4gICAqICAgfSk7XG4gICAqL1xuICBoZWFkZXJzKGhlYWRlciwgdmFsdWUpIHtcbiAgICBjb25zdCB7IGhlYWRlcnMgfSA9IHRoaXMuJCQ7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBoZWFkZXIgPSB7IFtoZWFkZXJdOiB2YWx1ZSB9O1xuICAgIH1cblxuICAgIGl0ZXJhdGUoaGVhZGVyLCAodmFsdWUsIGhlYWRlcikgPT4ge1xuICAgICAgaGVhZGVyc1toZWFkZXJdID0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNpbnN0YW5jZVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIE5ldyBjb25maWcgaWYgbmVlZGVkLlxuICAgKiBAcmV0dXJucyB7QWpheGVyfSBOZXcgaW5zdGFuY2Ugb2YgQWpheGVyLlxuICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIGZvciBjcmVhdGluZyBuZXcgYWpheGVyIGluc3RhbmNlcyBiYXNlZCBvbiBhbHJlYWR5IGV4aXN0ZW50LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBtYWluQWpheGVyID0gbmV3IEFqYXhlcih7XG4gICAqICAgYmFzZVVSTDogJy8vb3RoZXIuZG9tYWluLmNvbS9hcGknLFxuICAgKiAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgKiB9KTtcbiAgICpcbiAgICogY29uc3QgbG9uZ0FqYXhlciA9IG1haW5BamF4ZXIuaW5zdGFuY2Uoe1xuICAgKiAgIHRpbWVvdXQ6IDEwMDAwXG4gICAqIH0pO1xuICAgKi9cbiAgaW5zdGFuY2UoY29uZmlnID0ge30pIHtcbiAgICBjb25zdCBkYXRhQ29uZmlnID0gaGFzT3duKGNvbmZpZywgJ2RhdGEnKVxuICAgICAgPyB7IGRhdGE6IGNvbmZpZy5kYXRhIH1cbiAgICAgIDoge307XG5cbiAgICBkZWxldGUgY29uZmlnLmRhdGE7XG5cbiAgICBjb25zdCBjb25mID0gYXNzaWduKFxuICAgICAgZGVlcEFzc2lnbih7fSwgdGhpcy4kJCwgY29uZmlnKSxcbiAgICAgIGRhdGFDb25maWdcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBBamF4ZXIoY29uZik7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjcGF0Y2hcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHsqfSBbZGF0YV0gLSBBZGRpdGlvbmFsIHBhcmFtZXRlciBmb3IgdXBsb2FkaW5nIGRhdGEuXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QWpheGVyUmVzcG9uc2UsIEVycm9yPn0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBkZXNjcmlwdGlvbiBTaG9ydGhhbmQgZm9yICNyZXF1ZXN0IGZvciBoZWFkIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhamF4ZXIucGF0Y2goJy9kYXRhJywgeyB1c2VyOiAnSm9obicgfSkudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICBwYXRjaCh1cmwsIGRhdGEgPSB7fSwgY29uZmlnID0ge30pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiAhaXNTdHJpbmcodXJsKSkge1xuICAgICAgY29uZmlnID0gZGF0YTtcbiAgICAgIGRhdGEgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ3BhdGNoJywgZGF0YSB9LCBjb25maWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNwb3N0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt1cmxdIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBwYXJhbSB7Kn0gW2RhdGFdIC0gQWRkaXRpb25hbCBwYXJhbWV0ZXIgZm9yIHVwbG9hZGluZyBkYXRhLlxuICAgKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gW2NvbmZpZ10gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAZGVzY3JpcHRpb24gU2hvcnRoYW5kIGZvciAjcmVxdWVzdCBmb3IgaGVhZCByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLnBvc3QoJy9kYXRhJywgeyB1c2VyOiAnSm9obicgfSkudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICBwb3N0KHVybCwgZGF0YSA9IHt9LCBjb25maWcgPSB7fSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmICFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSBkYXRhO1xuICAgICAgZGF0YSA9IHVybDtcbiAgICAgIHVybCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCwgYXNzaWduKHsgbWV0aG9kOiAncG9zdCcsIGRhdGEgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjcHV0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt1cmxdIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBwYXJhbSB7Kn0gW2RhdGFdIC0gQWRkaXRpb25hbCBwYXJhbWV0ZXIgZm9yIHVwbG9hZGluZyBkYXRhLlxuICAgKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gW2NvbmZpZ10gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAZGVzY3JpcHRpb24gU2hvcnRoYW5kIGZvciAjcmVxdWVzdCBmb3IgaGVhZCByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLnB1dCgnL2RhdGEnLCB7IHVzZXI6ICdKb2huJyB9KS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICovXG4gIHB1dCh1cmwsIGRhdGEgPSB7fSwgY29uZmlnID0ge30pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiAhaXNTdHJpbmcodXJsKSkge1xuICAgICAgY29uZmlnID0gZGF0YTtcbiAgICAgIGRhdGEgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ3B1dCcsIGRhdGEgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjcmVxdWVzdFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdXJsXSAtIFVSTCBmb3IgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIEFkZGl0aW9uYWwgY29uZmlnIGZvciB0aGlzIHBhcnRpY3VsYXIgcmVxdWVzdC5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXF1ZXN0IHJlc3BvbnNlLlxuICAgKiBAZGVzY3JpcHRpb24gTWFpbiBmdW5jdGlvbiBmb3IgbWFraW5nIHJlcXVlc3RzLiBBbGwgcmVxdWVzdCBtZXRob2RzIGNhbGwgdGhpcyBtZXRob2RcbiAgICogaW5jbHVkaW5nIHRoZSBmZXRjaCBpbnN0YW5jZSBpdHNlbGYuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlci5yZXF1ZXN0KCcvZGF0YScsIHsgdGltZW91dDogMTAwMCB9KS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICpcbiAgICogYWpheGVyLnJlcXVlc3QoeyB0aW1lb3V0OiAxMDAwIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKlxuICAgKiBhamF4ZXIucmVxdWVzdCgpLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKi9cbiAgcmVxdWVzdCh1cmwsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgIGNvbmZpZyA9IHVybDtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhQ29uZmlnID0gaGFzT3duKGNvbmZpZywgJ2RhdGEnKVxuICAgICAgPyB7IGRhdGE6IGNvbmZpZy5kYXRhIH1cbiAgICAgIDoge307XG4gICAgY29uc3QgdXJsQ29uZmlnID0gaXNTdHJpbmcodXJsKVxuICAgICAgPyB7IHVybCB9XG4gICAgICA6IHt9O1xuXG4gICAgZGVsZXRlIGNvbmZpZy5kYXRhO1xuXG4gICAgY29uc3QgY29uZiA9IGFzc2lnbihcbiAgICAgIGRlZXBBc3NpZ24oXG4gICAgICAgIGRlZXBDbG9uZSh0aGlzLiQkKSxcbiAgICAgICAgdXJsQ29uZmlnLFxuICAgICAgICBjb25maWdcbiAgICAgICksXG4gICAgICBkYXRhQ29uZmlnXG4gICAgKTtcblxuICAgIGxldCB4aHI7XG4gICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIGl0ZXJhdGUoY29uZi5iZWZvcmUsIChtaWRkbGV3YXJlKSA9PiB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKG1pZGRsZXdhcmUubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICByZXNvbHZlKG1pZGRsZXdhcmUoY29uZikpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgaWYgKG1pZGRsZXdhcmUubGVuZ3RoIDwgMikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShtaWRkbGV3YXJlKGVyciwgY29uZikpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGFmdGVyLFxuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgfSxcbiAgICAgICAgYmFzZVVSTCxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBvbnByb2dyZXNzLFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICByZXNwb25zZVR5cGUsXG4gICAgICAgIHRpbWVvdXQsXG4gICAgICAgIHVybCxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzXG4gICAgICB9ID0gY29uZjtcbiAgICAgIGNvbnN0IGV2ZW50dWFsTWV0aG9kID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gICAgICBjb25zdCBldmVudHVhbFVSTCA9IGNvbnN0cnVjdFVSTChiYXNlVVJMLCB1cmwsIHBhcmFtcywgcXVlcnkpO1xuICAgICAgY29uc3QgZXZlbnR1YWxEYXRhID0gdHJhbnNmb3JtRGF0YShkYXRhLCBldmVudHVhbE1ldGhvZCwgaGVhZGVycyk7XG5cbiAgICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICB4aHIub3BlbihldmVudHVhbE1ldGhvZCwgZXZlbnR1YWxVUkwsIHRydWUsIHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgIGl0ZXJhdGUoaGVhZGVycywgKHZhbHVlLCBoZWFkZXIpID0+IHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLCB2YWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKG9ucHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKHVwbG9hZE1ldGhvZHMuaW5kZXhPZihtZXRob2QpID09PSAtMSkge1xuICAgICAgICAgIHhoci5vbnByb2dyZXNzID0gb25wcm9ncmVzcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBvbnByb2dyZXNzO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHhoci5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignUmVxdWVzdCB3YXMgYWJvcnRlZCcpO1xuXG4gICAgICAgIGVycm9yLnR5cGUgPSAnQUJPUlRfRVJST1InO1xuXG4gICAgICAgIHJlamVjdChlcnJvcik7XG5cbiAgICAgICAgeGhyID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpO1xuXG4gICAgICAgIGVycm9yLnR5cGUgPSAnTkVUV09SS19FUlJPUic7XG5cbiAgICAgICAgcmVqZWN0KGVycm9yKTtcblxuICAgICAgICB4aHIgPSBudWxsO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9udGltZW91dCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1JlcXVlc3QgdGltZSBleGNlZWRlZCcpO1xuXG4gICAgICAgIGVycm9yLnR5cGUgPSAnVElNRU9VVF9FUlJPUic7XG5cbiAgICAgICAgcmVqZWN0KGVycm9yKTtcblxuICAgICAgICB4aHIgPSBudWxsO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF4aHIgfHwgIXhoci5zdGF0dXMgfHwgeGhyLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICBjb25maWc6IGNvbmYsXG4gICAgICAgICAgZGF0YTogIXJlc3BvbnNlVHlwZSB8fCByZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHhoci5yZXNwb25zZVRleHQgOiB4aHIucmVzcG9uc2UsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSksXG4gICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzID09PSAxMjIzID8gMjA0IDogeGhyLnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzID09PSAxMjIzID8gJ05vIENvbnRlbnQnIDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgeGhyXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICBpdGVyYXRlKGFmdGVyLCAobWlkZGxld2FyZSkgPT4ge1xuICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1pZGRsZXdhcmUubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShtaWRkbGV3YXJlKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAobWlkZGxld2FyZS5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShtaWRkbGV3YXJlKGVyciwgcmVzcG9uc2UpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXNvbHZlKHByb21pc2VcbiAgICAgICAgICAudGhlbigoKSA9PiByZXNwb25zZSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZXJyLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgICAgeGhyLnRpbWVvdXQgPSArdGltZW91dCB8fCAwO1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9ICEhd2l0aENyZWRlbnRpYWxzO1xuXG4gICAgICB4aHIuc2VuZChldmVudHVhbERhdGEpO1xuICAgIH0pKTtcblxuICAgIHByb21pc2UuYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcbiAgICAgIGlmICh4aHIpIHtcbiAgICAgICAgeGhyLmFib3J0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxufVxuXG4vKipcbiAqIEBjb25zdCB7QWpheGVyfSBhamF4ZXJcbiAqIEB0eXBlIHtBamF4ZXJ9XG4gKiBAcHVibGljXG4gKiBAZGVzY3JpcHRpb24gRW1wdHkgaW5zdGFuY2Ugb2YgQWpheGVyLlxuICovXG5jb25zdCBhamF4ZXIgPSBuZXcgQWpheGVyKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEFqYXhlcjtcbmV4cG9ydCB7IEFqYXhlciwgYWpheGVyIH07XG4iLCJpbXBvcnQgQWpheGVyLCB7IGFqYXhlciB9IGZyb20gJy4vbGliL0FqYXhlcic7XG5cbndpbmRvdy5BamF4ZXIgPSBBamF4ZXI7XG53aW5kb3cuYWpheGVyID0gYWpheGVyO1xuIl0sIm5hbWVzIjpbInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImlzRnVuY3Rpb24iLCJpc09iamVjdCIsImlzUHJpbWl0aXZlIiwidGVzdCIsImlzU3RyaW5nIiwiYXNzaWduIiwidGFyZ2V0Iiwib2JqZWN0cyIsInNvdXJjZSIsImtleSIsIml0ZXJhdGUiLCJvYmplY3QiLCJjYWxsYmFjayIsImFycmF5IiwiaXNBcnJheSIsIml0ZXJhdGVkIiwibGVuZ3RoIiwiaGFzT3duUHJvcGVydHkiLCJtYXAiLCJuZXdPYmplY3QiLCJ0cmltIiwic3RyaW5nIiwicmVwbGFjZSIsIndoaXRlU3BhY2UiLCJyZXBsYWNlU3RyaW5nIiwic3RyaW5nVG9SZXBsYWNlIiwicmVwbGFjZW1lbnQiLCJzcGxpdCIsImpvaW4iLCJkZWVwQ2xvbmUiLCJjbG9uZSIsImRlZXBBc3NpZ24iLCJoYXNPd24iLCJwcm9wZXJ0eSIsImlzQWJzb2x1dGUiLCJ1cmwiLCJhYnNvbHV0ZVVSTFJlZ2V4cCIsImVuY29kZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInF1ZXJ5U3dpdGNoZXIiLCJxdWVyeSIsInByZWZpeCIsInF1ZXJ5UGFyYW1zIiwicHVzaCIsInBhcmFtIiwiU3RyaW5nIiwiZW1wdHlBcnJheSIsIkFycmF5IiwiYmFzZVVSTCIsInBhcmFtcyIsIlVSTCIsImluZGV4T2YiLCJwb3N0Zml4IiwicmF3SGVhZGVycyIsImhlYWRlcnMiLCJpbmRleCIsInN1YnN0cmluZyIsInZhbCIsIm5vdFRvVHJhbnNmb3JtIiwid2l0aG91dEJvZHkiLCJkYXRhIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlZmF1bHRzIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJ1cGxvYWRNZXRob2RzIiwiUHJvbWlzZSIsIkFqYXhlciIsImFqYXhlciIsInJlcXVlc3QiLCJhcHBseSIsImFyZ3VtZW50cyIsImNvbmZpZyIsImNvbmYiLCJkZWZpbmVQcm9wZXJ0eSIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUHJvbWlzZUNsYXNzIiwibWlkZGxld2FyZSIsImFmdGVyQWxsIiwiYWZ0ZXIiLCJ0aGlzIiwiJCQiLCJ1bnNoaWZ0IiwiYmVmb3JlQWxsIiwiYmVmb3JlIiwidW5kZWZpbmVkIiwiaGVhZGVyIiwiZGF0YUNvbmZpZyIsInVybENvbmZpZyIsInhociIsInByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsImVyciIsInJlamVjdCIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwib25wcm9ncmVzcyIsInJlc3BvbnNlVHlwZSIsInRpbWVvdXQiLCJ3aXRoQ3JlZGVudGlhbHMiLCJldmVudHVhbE1ldGhvZCIsInRvVXBwZXJDYXNlIiwiZXZlbnR1YWxVUkwiLCJjb25zdHJ1Y3RVUkwiLCJldmVudHVhbERhdGEiLCJ0cmFuc2Zvcm1EYXRhIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInVwbG9hZCIsIm9uYWJvcnQiLCJlcnJvciIsIkVycm9yIiwidHlwZSIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2UiLCJyZXNwb25zZVRleHQiLCJwYXJzZUhlYWRlcnMiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJzdGF0dXNUZXh0IiwiY2F0Y2giLCJlIiwic2VuZCIsImFib3J0IiwiRnVuY3Rpb24iXSwibWFwcGluZ3MiOiJ3QkFLQSxTQUVnQkEsR0FBWUMsU0FDbkJDLEdBQ0pDLEtBQUtGLEdBQ0xHLE1BQU0sR0FBRyxHQU9kLFFBQWdCQyxHQUFXSixTQUNELGtCQUFWQSxJQUErQyxhQUF2QkQsRUFBWUMsR0FHcEQsUUFBZ0JLLEdBQVNMLDZCQUNUQSxpQkFBQUEsTUFBMkIsK0JBQVZBLGlCQUFBQSxLQUFzQkksRUFBV0osSUFHbEUsUUFBZ0JNLEdBQVlOLFNBQ1QsUUFBVkEsR0FBa0IsNkNBQTZDTyx3QkFBWVAsaUJBQUFBLElBR3BGLFFBQWdCUSxHQUFTUixTQUNPLFdBQXZCRCxFQUFZQyxHQUdyQixR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"}