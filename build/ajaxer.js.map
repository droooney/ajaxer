{"version":3,"file":"ajaxer.js","sources":["../lib/utils.js","../lib/constructURL.js","../lib/parseHeaders.js","../lib/transformData.js","../lib/Ajaxer.js","../browser.js"],"sourcesContent":["const {\n  hasOwnProperty,\n  toString\n} = {};\nconst whiteSpace = /^\\s*|\\s*$/g;\nconst primitive = /^(number|string|boolean|symbol|undefined)$/;\n\nexport function toStringTag(value) {\n  return toString\n    .call(value)\n    .slice(8, -1);\n}\n\nexport const isArray = Array.isArray || ((value) => (\n  toStringTag(value) === 'Array'\n));\n\nexport function isFunction(value) {\n  return typeof value === 'function' || toStringTag(value) === 'Function';\n}\n\nexport function isObject(value) {\n  return typeof value && (typeof value === 'object' || isFunction(value));\n}\n\nexport function isPrimitive(value) {\n  return value === null || /^(number|string|boolean|symbol|undefined)$/.test(typeof value);\n}\n\nexport function isString(value) {\n  return toStringTag(value) === 'String';\n}\n\nexport function assign(target, ...objects) {\n  iterate(objects, (source) => {\n    iterate(source, (value, key) => {\n      target[key] = value;\n    });\n  });\n\n  return target;\n}\n\nexport function iterate(object, callback) {\n  const array = isArray(object);\n\n  let iterated = 0;\n  const { length } = object || {};\n\n  for (const key in object) {\n    if (hasOwnProperty.call(object, key)) {\n      if (array && iterated++ >= length) {\n        break;\n      }\n\n      callback(object[key], array ? +key : key, object);\n    }\n  }\n}\n\nexport function map(object, callback) {\n  const newObject = isArray(object)\n    ? []\n    : {};\n\n  iterate(object, (value, key) => {\n    newObject[key] = callback(value, key, object);\n  });\n\n  return newObject;\n}\n\nexport function trim(string) {\n  return string.replace(whiteSpace, '');\n}\n\nexport function replaceString(string, stringToReplace, replacement) {\n  return string\n    .split(stringToReplace)\n    .join(replacement);\n}\n\nexport function deepClone(object) {\n  if (isPrimitive(object) || isFunction(object)) {\n    return object;\n  }\n\n  const clone = isArray(object)\n    ? []\n    : {};\n\n  iterate(object, (value, key) => {\n    clone[key] = deepClone(value);\n  });\n\n  return clone;\n}\n\nexport function deepAssign(target, ...objects) {\n  iterate(objects, (object) => {\n    iterate(object, (object, key) => {\n      if (isPrimitive(object) || !hasOwnProperty.call(target, key)) {\n        target[key] = deepClone(object);\n\n        return;\n      }\n\n      if (!isPrimitive(target[key])) {\n        deepAssign(target[key], object);\n      }\n    });\n  });\n\n  return target;\n}\n\nexport function hasOwn(object, property) {\n  return hasOwnProperty.call(object, property);\n}\n","import {\n  isArray,\n  isObject,\n  iterate,\n  map,\n  replaceString\n} from './utils';\n\nconst absoluteURLRegexp = /^(([a-z][a-z\\d+\\-.]*:)?\\/\\/|data:[a-z]+\\/[a-z]+;base64,)/i;\nconst emptyArray = [];\n\nexport default (baseURL, url, params, query) => {\n  let URL = isAbsolute(url)\n    ? url\n    : `${ String(baseURL).replace(/\\/+$/, '') }/${ String(url).replace(/^\\/+/, '') }`;\n\n  iterate(params, (value, param) => {\n    URL = replaceString(URL, `:${ param }`, encode(value));\n  });\n\n  const queryParams = querySwitcher(query, '');\n\n  if (queryParams.length) {\n    const prefix = URL.indexOf('?') === -1 ? '?' : '&';\n    const postfix = map(queryParams, ({ param, value }) => (\n      `${ encode(param) }=${ encode(value) }`\n    )).join('&');\n\n    URL += prefix + postfix;\n  }\n\n  return URL;\n};\n\nfunction isAbsolute(url) {\n  return absoluteURLRegexp.test(url);\n}\n\nfunction encode(string) {\n  return encodeURIComponent(string);\n}\n\nfunction querySwitcher(query, prefix) {\n  /* eslint indent: 0 */\n  switch (true) {\n    case isArray(query): {\n      const queryParams = [];\n\n      iterate(query, (value) => {\n        if (isObject(value)) {\n          return queryParams.push(...querySwitcher(value, `${ prefix }[]`));\n        }\n\n        queryParams.push({\n          param: `${ prefix }[]`,\n          value\n        });\n      });\n\n      return queryParams;\n    }\n\n    case isObject(query): {\n      const queryParams = [];\n\n      iterate(query, (value, param) => {\n        if (isObject(value)) {\n          queryParams.push(...querySwitcher(value, prefix ? `${ prefix }[${ param }]` : param));\n\n          return;\n        }\n\n        queryParams.push({\n          param: prefix ? `${ prefix }[${ param }]` : param,\n          value: String(value)\n        });\n      });\n\n      return queryParams;\n    }\n\n    default: {\n      return emptyArray;\n    }\n  }\n}\n","import {\n  iterate,\n  trim\n} from './utils';\n\nexport default (rawHeaders) => {\n  const headers = {};\n\n  iterate((rawHeaders || '').split('\\n'), (value) => {\n    const index = value.indexOf(':');\n    const key = trim(value.substring(0, index));\n    const val = trim(value.substring(index + 1));\n\n    if (key) {\n      headers[key] = (headers[key] ? `${ headers[key] }, ` : '') + val;\n    }\n  });\n\n  return headers;\n};\n","import {\n  isObject,\n  toStringTag\n} from './utils';\n\nconst notToTransform = ['FormData', 'File', 'Blob', 'ArrayBuffer', 'String', 'Number'];\nconst withoutBody = ['DELETE', 'GET', 'HEAD'];\n\nexport default (data, method, headers) => {\n  if (withoutBody.indexOf(method) !== -1) {\n    return null;\n  }\n\n  if (isObject(data) && notToTransform.indexOf(toStringTag(data)) === -1) {\n    if (!headers['Content-Type']) {\n      headers['Content-Type'] = 'application/json;charset=utf-8';\n    }\n\n    return JSON.stringify(data);\n  }\n\n  return data;\n};\n","import {\n  isFunction,\n  isString,\n  assign,\n  iterate,\n  deepAssign,\n  deepClone,\n  hasOwn\n} from './utils';\n\nimport constructURL from './constructURL';\nimport parseHeaders from './parseHeaders';\nimport transformData from './transformData';\n\n/**\n * @typedef {'get'|'post'|'delete'|'head'|'put'|'patch'} AjaxerMethod\n * @public\n */\n\n/**\n * @typedef {Object} AjaxerConfig\n * @public\n * @property {Array.<AjaxerAfterMiddleware|AjaxerErrorAfterMiddleware>} [after]\n * @property {Object} [auth]\n * @property {String} [auth.username]\n * @property {String} [auth.password]\n * @property {String} [baseURL]\n * @property {Array.<AjaxerBeforeMiddleware|AjaxerErrorBeforeMiddleware>} [before]\n * @property {*} [data]\n * @property {Object.<String, String>} [headers]\n * @property {AjaxerMethod} [method]\n * @property {Object} [params]\n * @property {Object} [query]\n * @property {String} [responseType]\n * @property {Number} [timeout]\n * @property {String} [url]\n * @property {Boolean} [withCredentials]\n */\n\n/**\n * @typedef {Object} AjaxerResponse\n * @public\n * @property {AjaxerConfig} config\n * @property {*} data\n * @property {Object.<String, String>} headers\n * @property {Number} status\n * @property {String} statusText\n * @property {XMLHttpRequest} xhr\n */\n\n/**\n * @callback AjaxerAfterMiddleware\n * @public\n * @param {AjaxerResponse} config - Ajaxer response.\n */\n\n/**\n * @callback AjaxerErrorAfterMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {AjaxerResponse} config - Ajaxer response.\n */\n\n/**\n * @callback AjaxerBeforeMiddleware\n * @public\n * @param {AjaxerConfig} config - Ajaxer config.\n */\n\n/**\n * @callback AjaxerErrorBeforeMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {AjaxerConfig} config - Ajaxer config.\n */\n\n/**\n * @callback AjaxerConfigFunction\n * @public\n * @param {AjaxerConfig} config\n */\n\nconst defaults = {\n  after: [],\n  auth: {\n    username: '',\n    password: ''\n  },\n  baseURL: window.location.origin,\n  before: [],\n  data: null,\n  headers: {},\n  method: 'get',\n  params: {},\n  query: {},\n  responseType: '',\n  timeout: 0,\n  url: '',\n  withCredentials: false\n};\nconst uploadMethods = ['POST', 'PUT'];\nlet Promise;\n\n/**\n * @class Ajaxer\n * @extends Function\n * @public\n * @param {AjaxerConfig} [config = {}] - Config to add.\n * @returns {Ajaxer} Instance of Ajaxer.\n * An instance of Ajaxer is a function that simply calls #request with the same arguments.\n * @description Class for fetching data.\n *\n * @example\n * const ajaxer = new Ajaxer();\n *\n * ajaxer('/data').then((res) => {\n *   console.log(res);\n * });\n */\nclass Ajaxer extends Function {\n  /**\n   * @method Ajaxer.usePromise\n   * @public\n   * @param {Promise} PromiseClass - Promise class to use.\n   */\n  static usePromise(PromiseClass) {\n    Promise = PromiseClass;\n  }\n\n  constructor(config = {}) {\n    super();\n\n    function ajaxer() {\n      return ajaxer.request.apply(ajaxer, arguments);\n    }\n\n    const conf = deepAssign({}, defaults, config);\n\n    if (conf.before.indexOf(fetchBeforeMiddleware) === -1) {\n      conf.before.push(fetchBeforeMiddleware);\n    }\n\n    /**\n     * @member {AjaxerConfig} Ajaxer#$$\n     * @type {AjaxerConfig}\n     * @public\n     * @description Ajaxer config.\n     */\n    Object.defineProperty(ajaxer, '$$', { value: conf });\n    Object.setPrototypeOf(ajaxer, Ajaxer.prototype);\n\n    return ajaxer;\n  }\n\n  /**\n   * @method Ajaxer#after\n   * @public\n   * @param {AjaxerAfterMiddleware|AjaxerErrorAfterMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [afterAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the end\" and falsey for \"to the beginning\".\n   * @returns {Ajaxer} Returns this.\n   * @description Middleware that is called after the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const ajaxer = new Ajaxer()\n   *   .after((err, res) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .after((res) => {\n   *     res.json = JSON.parse(res.data):\n   *   });\n   */\n  after(middleware, afterAll = true) {\n    const { after } = this.$$;\n\n    if (afterAll) {\n      after.push(middleware);\n    } else {\n      after.unshift(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#before\n   * @public\n   * @param {AjaxerBeforeMiddleware|AjaxerErrorBeforeMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [beforeAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the beginning\" and falsey for \"to the end\".\n   * @returns {Ajaxer} Returns this.\n   * @description Middleware that is called before the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const ajaxer = new Ajaxer()\n   *   .before((err, req) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .before((req) => {\n   *     if (req.url === '/veryLongRequest') {\n   *       req.timeout = 30000;\n   *     }\n   *   });\n   */\n  before(middleware, beforeAll = true) {\n    const { before } = this.$$;\n\n    if (beforeAll) {\n      before.unshift(middleware);\n    } else {\n      before.push(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#config\n   * @public\n   * @param {String|AjaxerConfig|AjaxerConfigFunction} [property] - If it's a function\n   * it's called with the fetch config argument, if it's a string the value argument\n   * is used for assigning this property to the fetch config\n   * otherwise it's assigned to the fetch config.\n   * @param {*} [value] - See the property argument.\n   * @returns {Ajaxer|AjaxerConfig} If the argument is present this is returned otherwise the fetch config is returned.\n   * @description Method for getting and setting config.\n   *\n   * @example\n   * const ajaxer = new Ajaxer();\n   *\n   * ajaxer.config({ baseURL: 5000 });\n   * ajaxer.config().timeout; // 5000\n   *\n   * ajaxer.config((config) => {\n   *   config.baseURL += '/api';\n   * });\n   */\n  config(property, value) {\n    const config = this.$$;\n\n    if (!arguments.length) {\n      return config;\n    }\n\n    if (isFunction(property)) {\n      property(config);\n    } else {\n      if (arguments.length >= 2) {\n        property = { [property]: value };\n      }\n\n      deepAssign(config, property);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#delete\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for delete requests.\n   *\n   * @example\n   * ajaxer.delete('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  delete(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'delete' }, config));\n  }\n\n  /**\n   * @method Ajaxer#get\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for get requests.\n   *\n   * @example\n   * ajaxer.get('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  get(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'get' }, config));\n  }\n\n  /**\n   * @method Ajaxer#head\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.head('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  head(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'head' }, config));\n  }\n\n  /**\n   * @method Ajaxer#headers\n   * @public\n   * @param {String|Object.<String, String>} header - A header string or an object of the following format:\n   * { [header]: [value1, value2, ...] }.\n   * @param {String} [value] - Header value. If the first argument is a string\n   * this has to be a header value.\n   * @returns {Ajaxer} Returns this.\n   * @description Method for setting request headers.\n   *\n   * @example\n   * ajaxer\n   *   .headers('My-Header', 'Value')\n   *   .headers({\n   *     'My-Another-Header': 'Value2'\n   *   });\n   */\n  headers(header, value) {\n    const { headers } = this.$$;\n\n    if (arguments.length >= 2) {\n      header = { [header]: value };\n    }\n\n    iterate(header, (value, header) => {\n      headers[header] = value;\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Ajaxer#instance\n   * @public\n   * @param {AjaxerConfig} [config] - New config if needed.\n   * @returns {Ajaxer} New instance of Ajaxer.\n   * @description Method for creating new ajaxer instances based on already existent.\n   *\n   * @example\n   * const mainAjaxer = new Ajaxer({\n   *   baseURL: '//other.domain.com/api',\n   *   withCredentials: true\n   * });\n   *\n   * const longAjaxer = mainAjaxer.instance({\n   *   timeout: 10000\n   * });\n   */\n  instance(config = {}) {\n    const dataConfig = hasOwn(config, 'data')\n      ? { data: config.data }\n      : {};\n\n    delete config.data;\n\n    const conf = assign(\n      deepAssign({}, this.$$, config),\n      dataConfig\n    );\n\n    return new Ajaxer(conf);\n  }\n\n  /**\n   * @method Ajaxer#patch\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.patch('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  patch(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'patch', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#post\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.post('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  post(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'post', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#put\n   * @public\n   * @param {String} [url] - See {@link Ajaxer#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {AjaxerConfig} [config] - See {@link Ajaxer#request}.\n   * @returns {Promise.<AjaxerResponse, Error>} See {@link Ajaxer#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * ajaxer.put('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  put(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'put', data }, config));\n  }\n\n  /**\n   * @method Ajaxer#request\n   * @public\n   * @param {String} [url] - URL for the request.\n   * @param {AjaxerConfig} [config] - Additional config for this particular request.\n   * @returns {Promise.<AjaxerResponse, Error>} Promise that is resolved with the request response.\n   * @description Main function for making requests. All request methods call this method\n   * including the fetch instance itself.\n   *\n   * @example\n   * ajaxer.request('/data', { timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * ajaxer.request({ timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * ajaxer.request().then((res) => {\n   *   console.log(res);\n   * });\n   */\n  request(url, config = {}) {\n    if (arguments.length === 1 && !isString(url)) {\n      config = url;\n    }\n\n    const dataConfig = hasOwn(config, 'data')\n      ? { data: config.data }\n      : {};\n    const urlConfig = isString(url)\n      ? { url }\n      : {};\n\n    delete config.data;\n\n    const conf = assign(\n      deepAssign(\n        deepClone(this.$$),\n        urlConfig,\n        config\n      ),\n      dataConfig\n    );\n\n    let xhr;\n    let promise = Promise.resolve();\n\n    iterate(conf.before, (middleware) => {\n      promise = promise.then(() => {\n        if (middleware.length >= 2) {\n          return Promise.resolve();\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(conf));\n        });\n      }, (err) => {\n        if (middleware.length < 2) {\n          return Promise.reject(err);\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(err, conf));\n        });\n      });\n    });\n\n    promise = promise.then(() => new Promise((resolve, reject) => {\n      const {\n        after,\n        auth: {\n          username,\n          password\n        },\n        data,\n        headers,\n        method,\n        onprogress,\n        responseType,\n        timeout,\n        url,\n        withCredentials\n      } = conf;\n\n      xhr = new XMLHttpRequest();\n\n      xhr.open(method, url, true, username, password);\n\n      iterate(headers, (value, header) => {\n        xhr.setRequestHeader(header, value);\n      });\n\n      if (onprogress) {\n        if (uploadMethods.indexOf(method) === -1) {\n          xhr.onprogress = onprogress;\n        } else {\n          xhr.upload.onprogress = onprogress;\n        }\n      }\n\n      xhr.onabort = () => {\n        const error = new Error('Request was aborted');\n\n        error.type = 'ABORT_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.onerror = () => {\n        const error = new Error('Network error');\n\n        error.type = 'NETWORK_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.ontimeout = () => {\n        const error = new Error('Request time exceeded');\n\n        error.type = 'TIMEOUT_ERROR';\n\n        reject(error);\n\n        xhr = null;\n      };\n\n      xhr.onreadystatechange = () => {\n        if (!xhr || !xhr.status || xhr.readyState !== 4) {\n          return;\n        }\n\n        const response = {\n          config: conf,\n          data: !responseType || responseType === 'text' ? xhr.responseText : xhr.response,\n          headers: parseHeaders(xhr.getAllResponseHeaders()),\n          status: xhr.status === 1223 ? 204 : xhr.status,\n          statusText: xhr.status === 1223 ? 'No Content' : xhr.statusText,\n          xhr\n        };\n\n        let promise = Promise.resolve();\n\n        iterate(after, (middleware) => {\n          promise = promise.then(() => {\n            if (middleware.length >= 2) {\n              return Promise.resolve();\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(response));\n            });\n          }, (err) => {\n            if (middleware.length < 2) {\n              return Promise.reject(err);\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(err, response));\n            });\n          });\n        });\n\n        resolve(promise\n          .then(() => response)\n          .catch((err) => {\n            try {\n              err.response = response;\n            } catch (e) {\n              throw err;\n            }\n\n            throw err;\n          })\n        );\n      };\n\n      xhr.responseType = responseType;\n      xhr.timeout = +timeout || 0;\n      xhr.withCredentials = !!withCredentials;\n\n      xhr.send(data);\n    }));\n\n    promise.abort = function abort() {\n      if (xhr) {\n        xhr.abort();\n      }\n\n      return this;\n    };\n\n    return promise;\n  }\n}\n\nfunction fetchBeforeMiddleware(config) {\n  const {\n    baseURL,\n    data,\n    headers,\n    method,\n    params,\n    query,\n    url\n  } = config;\n  const METHOD = method.toUpperCase();\n\n  config.method = METHOD;\n  config.url = constructURL(baseURL, url, params, query);\n  config.data = transformData(data, METHOD, headers);\n}\n\n/**\n * @const {Ajaxer} fetch\n * @type {Ajaxer}\n * @public\n * @description Empty instance of Ajaxer.\n */\nconst fetch = new Ajaxer();\n\nexport default Ajaxer;\nexport { Ajaxer, fetch };\n","import Ajaxer from './lib/Ajaxer';\n\nwindow.Ajaxer = Ajaxer;\n"],"names":["hasOwnProperty","toString","whiteSpace","toStringTag","value","call","slice","isArray","Array","isFunction","isObject","isPrimitive","test","isString","assign","target","objects","source","key","iterate","object","callback","array","iterated","length","map","newObject","trim","string","replace","replaceString","stringToReplace","replacement","split","join","deepClone","clone","deepAssign","hasOwn","property","absoluteURLRegexp","emptyArray","baseURL","url","params","query","URL","isAbsolute","String","param","encode","queryParams","querySwitcher","prefix","indexOf","postfix","encodeURIComponent","push","rawHeaders","headers","index","substring","val","notToTransform","withoutBody","data","method","JSON","stringify","defaults","window","location","origin","uploadMethods","Promise","Ajaxer","PromiseClass","config","ajaxer","request","apply","arguments","conf","before","fetchBeforeMiddleware","defineProperty","setPrototypeOf","prototype","middleware","afterAll","after","$$","unshift","beforeAll","undefined","header","dataConfig","urlConfig","xhr","promise","resolve","then","err","reject","auth","username","password","onprogress","responseType","timeout","withCredentials","XMLHttpRequest","open","setRequestHeader","upload","onabort","error","Error","type","onerror","ontimeout","onreadystatechange","status","readyState","response","responseText","parseHeaders","getAllResponseHeaders","statusText","catch","e","send","abort","Function","METHOD","toUpperCase","constructURL","transformData","fetch"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWpheGVyLmpzIiwic291cmNlcyI6WyIuLi9saWIvdXRpbHMuanMiLCIuLi9saWIvY29uc3RydWN0VVJMLmpzIiwiLi4vbGliL3BhcnNlSGVhZGVycy5qcyIsIi4uL2xpYi90cmFuc2Zvcm1EYXRhLmpzIiwiLi4vbGliL0FqYXhlci5qcyIsIi4uL2Jyb3dzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICBoYXNPd25Qcm9wZXJ0eSxcbiAgdG9TdHJpbmdcbn0gPSB7fTtcbmNvbnN0IHdoaXRlU3BhY2UgPSAvXlxccyp8XFxzKiQvZztcbmNvbnN0IHByaW1pdGl2ZSA9IC9eKG51bWJlcnxzdHJpbmd8Ym9vbGVhbnxzeW1ib2x8dW5kZWZpbmVkKSQvO1xuXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmdUYWcodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nXG4gICAgLmNhbGwodmFsdWUpXG4gICAgLnNsaWNlKDgsIC0xKTtcbn1cblxuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8ICgodmFsdWUpID0+IChcbiAgdG9TdHJpbmdUYWcodmFsdWUpID09PSAnQXJyYXknXG4pKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0b1N0cmluZ1RhZyh2YWx1ZSkgPT09ICdGdW5jdGlvbic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnIHx8IGlzRnVuY3Rpb24odmFsdWUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCAvXihudW1iZXJ8c3RyaW5nfGJvb2xlYW58c3ltYm9sfHVuZGVmaW5lZCkkLy50ZXN0KHR5cGVvZiB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmdUYWcodmFsdWUpID09PSAnU3RyaW5nJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIC4uLm9iamVjdHMpIHtcbiAgaXRlcmF0ZShvYmplY3RzLCAoc291cmNlKSA9PiB7XG4gICAgaXRlcmF0ZShzb3VyY2UsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZShvYmplY3QsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGFycmF5ID0gaXNBcnJheShvYmplY3QpO1xuXG4gIGxldCBpdGVyYXRlZCA9IDA7XG4gIGNvbnN0IHsgbGVuZ3RoIH0gPSBvYmplY3QgfHwge307XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICBpZiAoYXJyYXkgJiYgaXRlcmF0ZWQrKyA+PSBsZW5ndGgpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKG9iamVjdFtrZXldLCBhcnJheSA/ICtrZXkgOiBrZXksIG9iamVjdCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXAob2JqZWN0LCBjYWxsYmFjaykge1xuICBjb25zdCBuZXdPYmplY3QgPSBpc0FycmF5KG9iamVjdClcbiAgICA/IFtdXG4gICAgOiB7fTtcblxuICBpdGVyYXRlKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICBuZXdPYmplY3Rba2V5XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCk7XG4gIH0pO1xuXG4gIHJldHVybiBuZXdPYmplY3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmltKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uod2hpdGVTcGFjZSwgJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZVN0cmluZyhzdHJpbmcsIHN0cmluZ1RvUmVwbGFjZSwgcmVwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHN0cmluZ1xuICAgIC5zcGxpdChzdHJpbmdUb1JlcGxhY2UpXG4gICAgLmpvaW4ocmVwbGFjZW1lbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVlcENsb25lKG9iamVjdCkge1xuICBpZiAoaXNQcmltaXRpdmUob2JqZWN0KSB8fCBpc0Z1bmN0aW9uKG9iamVjdCkpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgY29uc3QgY2xvbmUgPSBpc0FycmF5KG9iamVjdClcbiAgICA/IFtdXG4gICAgOiB7fTtcblxuICBpdGVyYXRlKG9iamVjdCwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICBjbG9uZVtrZXldID0gZGVlcENsb25lKHZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNsb25lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVlcEFzc2lnbih0YXJnZXQsIC4uLm9iamVjdHMpIHtcbiAgaXRlcmF0ZShvYmplY3RzLCAob2JqZWN0KSA9PiB7XG4gICAgaXRlcmF0ZShvYmplY3QsIChvYmplY3QsIGtleSkgPT4ge1xuICAgICAgaWYgKGlzUHJpbWl0aXZlKG9iamVjdCkgfHwgIWhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gZGVlcENsb25lKG9iamVjdCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzUHJpbWl0aXZlKHRhcmdldFtrZXldKSkge1xuICAgICAgICBkZWVwQXNzaWduKHRhcmdldFtrZXldLCBvYmplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iamVjdCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG59XG4iLCJpbXBvcnQge1xuICBpc0FycmF5LFxuICBpc09iamVjdCxcbiAgaXRlcmF0ZSxcbiAgbWFwLFxuICByZXBsYWNlU3RyaW5nXG59IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBhYnNvbHV0ZVVSTFJlZ2V4cCA9IC9eKChbYS16XVthLXpcXGQrXFwtLl0qOik/XFwvXFwvfGRhdGE6W2Etel0rXFwvW2Etel0rO2Jhc2U2NCwpL2k7XG5jb25zdCBlbXB0eUFycmF5ID0gW107XG5cbmV4cG9ydCBkZWZhdWx0IChiYXNlVVJMLCB1cmwsIHBhcmFtcywgcXVlcnkpID0+IHtcbiAgbGV0IFVSTCA9IGlzQWJzb2x1dGUodXJsKVxuICAgID8gdXJsXG4gICAgOiBgJHsgU3RyaW5nKGJhc2VVUkwpLnJlcGxhY2UoL1xcLyskLywgJycpIH0vJHsgU3RyaW5nKHVybCkucmVwbGFjZSgvXlxcLysvLCAnJykgfWA7XG5cbiAgaXRlcmF0ZShwYXJhbXMsICh2YWx1ZSwgcGFyYW0pID0+IHtcbiAgICBVUkwgPSByZXBsYWNlU3RyaW5nKFVSTCwgYDokeyBwYXJhbSB9YCwgZW5jb2RlKHZhbHVlKSk7XG4gIH0pO1xuXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcXVlcnlTd2l0Y2hlcihxdWVyeSwgJycpO1xuXG4gIGlmIChxdWVyeVBhcmFtcy5sZW5ndGgpIHtcbiAgICBjb25zdCBwcmVmaXggPSBVUkwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJztcbiAgICBjb25zdCBwb3N0Zml4ID0gbWFwKHF1ZXJ5UGFyYW1zLCAoeyBwYXJhbSwgdmFsdWUgfSkgPT4gKFxuICAgICAgYCR7IGVuY29kZShwYXJhbSkgfT0keyBlbmNvZGUodmFsdWUpIH1gXG4gICAgKSkuam9pbignJicpO1xuXG4gICAgVVJMICs9IHByZWZpeCArIHBvc3RmaXg7XG4gIH1cblxuICByZXR1cm4gVVJMO1xufTtcblxuZnVuY3Rpb24gaXNBYnNvbHV0ZSh1cmwpIHtcbiAgcmV0dXJuIGFic29sdXRlVVJMUmVnZXhwLnRlc3QodXJsKTtcbn1cblxuZnVuY3Rpb24gZW5jb2RlKHN0cmluZykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZyk7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5U3dpdGNoZXIocXVlcnksIHByZWZpeCkge1xuICAvKiBlc2xpbnQgaW5kZW50OiAwICovXG4gIHN3aXRjaCAodHJ1ZSkge1xuICAgIGNhc2UgaXNBcnJheShxdWVyeSk6IHtcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gW107XG5cbiAgICAgIGl0ZXJhdGUocXVlcnksICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zLnB1c2goLi4ucXVlcnlTd2l0Y2hlcih2YWx1ZSwgYCR7IHByZWZpeCB9W11gKSk7XG4gICAgICAgIH1cblxuICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKHtcbiAgICAgICAgICBwYXJhbTogYCR7IHByZWZpeCB9W11gLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgICB9XG5cbiAgICBjYXNlIGlzT2JqZWN0KHF1ZXJ5KToge1xuICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBbXTtcblxuICAgICAgaXRlcmF0ZShxdWVyeSwgKHZhbHVlLCBwYXJhbSkgPT4ge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMucHVzaCguLi5xdWVyeVN3aXRjaGVyKHZhbHVlLCBwcmVmaXggPyBgJHsgcHJlZml4IH1bJHsgcGFyYW0gfV1gIDogcGFyYW0pKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goe1xuICAgICAgICAgIHBhcmFtOiBwcmVmaXggPyBgJHsgcHJlZml4IH1bJHsgcGFyYW0gfV1gIDogcGFyYW0sXG4gICAgICAgICAgdmFsdWU6IFN0cmluZyh2YWx1ZSlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaXRlcmF0ZSxcbiAgdHJpbVxufSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgKHJhd0hlYWRlcnMpID0+IHtcbiAgY29uc3QgaGVhZGVycyA9IHt9O1xuXG4gIGl0ZXJhdGUoKHJhd0hlYWRlcnMgfHwgJycpLnNwbGl0KCdcXG4nKSwgKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgaW5kZXggPSB2YWx1ZS5pbmRleE9mKCc6Jyk7XG4gICAgY29uc3Qga2V5ID0gdHJpbSh2YWx1ZS5zdWJzdHJpbmcoMCwgaW5kZXgpKTtcbiAgICBjb25zdCB2YWwgPSB0cmltKHZhbHVlLnN1YnN0cmluZyhpbmRleCArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGhlYWRlcnNba2V5XSA9IChoZWFkZXJzW2tleV0gPyBgJHsgaGVhZGVyc1trZXldIH0sIGAgOiAnJykgKyB2YWw7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaGVhZGVycztcbn07XG4iLCJpbXBvcnQge1xuICBpc09iamVjdCxcbiAgdG9TdHJpbmdUYWdcbn0gZnJvbSAnLi91dGlscyc7XG5cbmNvbnN0IG5vdFRvVHJhbnNmb3JtID0gWydGb3JtRGF0YScsICdGaWxlJywgJ0Jsb2InLCAnQXJyYXlCdWZmZXInLCAnU3RyaW5nJywgJ051bWJlciddO1xuY29uc3Qgd2l0aG91dEJvZHkgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCddO1xuXG5leHBvcnQgZGVmYXVsdCAoZGF0YSwgbWV0aG9kLCBoZWFkZXJzKSA9PiB7XG4gIGlmICh3aXRob3V0Qm9keS5pbmRleE9mKG1ldGhvZCkgIT09IC0xKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoaXNPYmplY3QoZGF0YSkgJiYgbm90VG9UcmFuc2Zvcm0uaW5kZXhPZih0b1N0cmluZ1RhZyhkYXRhKSkgPT09IC0xKSB7XG4gICAgaWYgKCFoZWFkZXJzWydDb250ZW50LVR5cGUnXSkge1xuICAgICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JztcbiAgICB9XG5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn07XG4iLCJpbXBvcnQge1xuICBpc0Z1bmN0aW9uLFxuICBpc1N0cmluZyxcbiAgYXNzaWduLFxuICBpdGVyYXRlLFxuICBkZWVwQXNzaWduLFxuICBkZWVwQ2xvbmUsXG4gIGhhc093blxufSBmcm9tICcuL3V0aWxzJztcblxuaW1wb3J0IGNvbnN0cnVjdFVSTCBmcm9tICcuL2NvbnN0cnVjdFVSTCc7XG5pbXBvcnQgcGFyc2VIZWFkZXJzIGZyb20gJy4vcGFyc2VIZWFkZXJzJztcbmltcG9ydCB0cmFuc2Zvcm1EYXRhIGZyb20gJy4vdHJhbnNmb3JtRGF0YSc7XG5cbi8qKlxuICogQHR5cGVkZWYgeydnZXQnfCdwb3N0J3wnZGVsZXRlJ3wnaGVhZCd8J3B1dCd8J3BhdGNoJ30gQWpheGVyTWV0aG9kXG4gKiBAcHVibGljXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBamF4ZXJDb25maWdcbiAqIEBwdWJsaWNcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEFqYXhlckFmdGVyTWlkZGxld2FyZXxBamF4ZXJFcnJvckFmdGVyTWlkZGxld2FyZT59IFthZnRlcl1cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbYXV0aF1cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbYXV0aC51c2VybmFtZV1cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbYXV0aC5wYXNzd29yZF1cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbYmFzZVVSTF1cbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEFqYXhlckJlZm9yZU1pZGRsZXdhcmV8QWpheGVyRXJyb3JCZWZvcmVNaWRkbGV3YXJlPn0gW2JlZm9yZV1cbiAqIEBwcm9wZXJ0eSB7Kn0gW2RhdGFdXG4gKiBAcHJvcGVydHkge09iamVjdC48U3RyaW5nLCBTdHJpbmc+fSBbaGVhZGVyc11cbiAqIEBwcm9wZXJ0eSB7QWpheGVyTWV0aG9kfSBbbWV0aG9kXVxuICogQHByb3BlcnR5IHtPYmplY3R9IFtwYXJhbXNdXG4gKiBAcHJvcGVydHkge09iamVjdH0gW3F1ZXJ5XVxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtyZXNwb25zZVR5cGVdXG4gKiBAcHJvcGVydHkge051bWJlcn0gW3RpbWVvdXRdXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW3VybF1cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3dpdGhDcmVkZW50aWFsc11cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFqYXhlclJlc3BvbnNlXG4gKiBAcHVibGljXG4gKiBAcHJvcGVydHkge0FqYXhlckNvbmZpZ30gY29uZmlnXG4gKiBAcHJvcGVydHkgeyp9IGRhdGFcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxTdHJpbmcsIFN0cmluZz59IGhlYWRlcnNcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBzdGF0dXNcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBzdGF0dXNUZXh0XG4gKiBAcHJvcGVydHkge1hNTEh0dHBSZXF1ZXN0fSB4aHJcbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBBamF4ZXJBZnRlck1pZGRsZXdhcmVcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7QWpheGVyUmVzcG9uc2V9IGNvbmZpZyAtIEFqYXhlciByZXNwb25zZS5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBBamF4ZXJFcnJvckFmdGVyTWlkZGxld2FyZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtFcnJvcnwqfSBlcnIgLSBUaHJvd24gZXJyb3IuXG4gKiBAcGFyYW0ge0FqYXhlclJlc3BvbnNlfSBjb25maWcgLSBBamF4ZXIgcmVzcG9uc2UuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgQWpheGVyQmVmb3JlTWlkZGxld2FyZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtBamF4ZXJDb25maWd9IGNvbmZpZyAtIEFqYXhlciBjb25maWcuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgQWpheGVyRXJyb3JCZWZvcmVNaWRkbGV3YXJlXG4gKiBAcHVibGljXG4gKiBAcGFyYW0ge0Vycm9yfCp9IGVyciAtIFRocm93biBlcnJvci5cbiAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBjb25maWcgLSBBamF4ZXIgY29uZmlnLlxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIEFqYXhlckNvbmZpZ0Z1bmN0aW9uXG4gKiBAcHVibGljXG4gKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gY29uZmlnXG4gKi9cblxuY29uc3QgZGVmYXVsdHMgPSB7XG4gIGFmdGVyOiBbXSxcbiAgYXV0aDoge1xuICAgIHVzZXJuYW1lOiAnJyxcbiAgICBwYXNzd29yZDogJydcbiAgfSxcbiAgYmFzZVVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgYmVmb3JlOiBbXSxcbiAgZGF0YTogbnVsbCxcbiAgaGVhZGVyczoge30sXG4gIG1ldGhvZDogJ2dldCcsXG4gIHBhcmFtczoge30sXG4gIHF1ZXJ5OiB7fSxcbiAgcmVzcG9uc2VUeXBlOiAnJyxcbiAgdGltZW91dDogMCxcbiAgdXJsOiAnJyxcbiAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxufTtcbmNvbnN0IHVwbG9hZE1ldGhvZHMgPSBbJ1BPU1QnLCAnUFVUJ107XG5sZXQgUHJvbWlzZTtcblxuLyoqXG4gKiBAY2xhc3MgQWpheGVyXG4gKiBAZXh0ZW5kcyBGdW5jdGlvblxuICogQHB1YmxpY1xuICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWcgPSB7fV0gLSBDb25maWcgdG8gYWRkLlxuICogQHJldHVybnMge0FqYXhlcn0gSW5zdGFuY2Ugb2YgQWpheGVyLlxuICogQW4gaW5zdGFuY2Ugb2YgQWpheGVyIGlzIGEgZnVuY3Rpb24gdGhhdCBzaW1wbHkgY2FsbHMgI3JlcXVlc3Qgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMuXG4gKiBAZGVzY3JpcHRpb24gQ2xhc3MgZm9yIGZldGNoaW5nIGRhdGEuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IGFqYXhlciA9IG5ldyBBamF4ZXIoKTtcbiAqXG4gKiBhamF4ZXIoJy9kYXRhJykudGhlbigocmVzKSA9PiB7XG4gKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gKiB9KTtcbiAqL1xuY2xhc3MgQWpheGVyIGV4dGVuZHMgRnVuY3Rpb24ge1xuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIudXNlUHJvbWlzZVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7UHJvbWlzZX0gUHJvbWlzZUNsYXNzIC0gUHJvbWlzZSBjbGFzcyB0byB1c2UuXG4gICAqL1xuICBzdGF0aWMgdXNlUHJvbWlzZShQcm9taXNlQ2xhc3MpIHtcbiAgICBQcm9taXNlID0gUHJvbWlzZUNsYXNzO1xuICB9XG5cbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgZnVuY3Rpb24gYWpheGVyKCkge1xuICAgICAgcmV0dXJuIGFqYXhlci5yZXF1ZXN0LmFwcGx5KGFqYXhlciwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb25mID0gZGVlcEFzc2lnbih7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgICBpZiAoY29uZi5iZWZvcmUuaW5kZXhPZihmZXRjaEJlZm9yZU1pZGRsZXdhcmUpID09PSAtMSkge1xuICAgICAgY29uZi5iZWZvcmUucHVzaChmZXRjaEJlZm9yZU1pZGRsZXdhcmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIge0FqYXhlckNvbmZpZ30gQWpheGVyIyQkXG4gICAgICogQHR5cGUge0FqYXhlckNvbmZpZ31cbiAgICAgKiBAcHVibGljXG4gICAgICogQGRlc2NyaXB0aW9uIEFqYXhlciBjb25maWcuXG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFqYXhlciwgJyQkJywgeyB2YWx1ZTogY29uZiB9KTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYWpheGVyLCBBamF4ZXIucHJvdG90eXBlKTtcblxuICAgIHJldHVybiBhamF4ZXI7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjYWZ0ZXJcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge0FqYXhlckFmdGVyTWlkZGxld2FyZXxBamF4ZXJFcnJvckFmdGVyTWlkZGxld2FyZX0gbWlkZGxld2FyZSAtIE1pZGRsZXdhcmUgdG8gYWRkLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW58Kn0gW2FmdGVyQWxsID0gdHJ1ZV0gLSBCb29sZWFuIHBhcmFtZXRlciB3aGVyZSB0byBwdXQgdGhlIG1pZGRsZXdhcmUuXG4gICAqIFRydXRoeSBwYXJhbWV0ZXIgc3RhbmRzIGZvciBcInRvIHRoZSBlbmRcIiBhbmQgZmFsc2V5IGZvciBcInRvIHRoZSBiZWdpbm5pbmdcIi5cbiAgICogQHJldHVybnMge0FqYXhlcn0gUmV0dXJucyB0aGlzLlxuICAgKiBAZGVzY3JpcHRpb24gTWlkZGxld2FyZSB0aGF0IGlzIGNhbGxlZCBhZnRlciB0aGUgcmVxdWVzdC5cbiAgICogSWYgdGhlIG1pZGRsZXdhcmUgaGFzIDIgb3IgbGVzcyBhcmd1bWVudHMgaXQncyB0cmVhdGVkIGFzIHN1Y2Nlc3MgbWlkZGxld2FyZSBvdGhlcndpc2UgYXMgYW4gZXJyb3Igb25lLlxuICAgKiBJZiB0aGUgbWlkZGxld2FyZSByZXR1cm5zIGEgcHJvbWlzZSBpdCBiZWNvbWVzIGEgcGFydCBvZiB0aGUgbWlkZGxld2FyZSBjaGFpbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgYWpheGVyID0gbmV3IEFqYXhlcigpXG4gICAqICAgLmFmdGVyKChlcnIsIHJlcykgPT4ge1xuICAgKiAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICpcbiAgICogICAgIHRocm93IGVycjtcbiAgICogICB9KVxuICAgKiAgIC5hZnRlcigocmVzKSA9PiB7XG4gICAqICAgICByZXMuanNvbiA9IEpTT04ucGFyc2UocmVzLmRhdGEpOlxuICAgKiAgIH0pO1xuICAgKi9cbiAgYWZ0ZXIobWlkZGxld2FyZSwgYWZ0ZXJBbGwgPSB0cnVlKSB7XG4gICAgY29uc3QgeyBhZnRlciB9ID0gdGhpcy4kJDtcblxuICAgIGlmIChhZnRlckFsbCkge1xuICAgICAgYWZ0ZXIucHVzaChtaWRkbGV3YXJlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXIudW5zaGlmdChtaWRkbGV3YXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNiZWZvcmVcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge0FqYXhlckJlZm9yZU1pZGRsZXdhcmV8QWpheGVyRXJyb3JCZWZvcmVNaWRkbGV3YXJlfSBtaWRkbGV3YXJlIC0gTWlkZGxld2FyZSB0byBhZGQuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbnwqfSBbYmVmb3JlQWxsID0gdHJ1ZV0gLSBCb29sZWFuIHBhcmFtZXRlciB3aGVyZSB0byBwdXQgdGhlIG1pZGRsZXdhcmUuXG4gICAqIFRydXRoeSBwYXJhbWV0ZXIgc3RhbmRzIGZvciBcInRvIHRoZSBiZWdpbm5pbmdcIiBhbmQgZmFsc2V5IGZvciBcInRvIHRoZSBlbmRcIi5cbiAgICogQHJldHVybnMge0FqYXhlcn0gUmV0dXJucyB0aGlzLlxuICAgKiBAZGVzY3JpcHRpb24gTWlkZGxld2FyZSB0aGF0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIHJlcXVlc3QuXG4gICAqIElmIHRoZSBtaWRkbGV3YXJlIGhhcyAyIG9yIGxlc3MgYXJndW1lbnRzIGl0J3MgdHJlYXRlZCBhcyBzdWNjZXNzIG1pZGRsZXdhcmUgb3RoZXJ3aXNlIGFzIGFuIGVycm9yIG9uZS5cbiAgICogSWYgdGhlIG1pZGRsZXdhcmUgcmV0dXJucyBhIHByb21pc2UgaXQgYmVjb21lcyBhIHBhcnQgb2YgdGhlIG1pZGRsZXdhcmUgY2hhaW4uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGFqYXhlciA9IG5ldyBBamF4ZXIoKVxuICAgKiAgIC5iZWZvcmUoKGVyciwgcmVxKSA9PiB7XG4gICAqICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgKlxuICAgKiAgICAgdGhyb3cgZXJyO1xuICAgKiAgIH0pXG4gICAqICAgLmJlZm9yZSgocmVxKSA9PiB7XG4gICAqICAgICBpZiAocmVxLnVybCA9PT0gJy92ZXJ5TG9uZ1JlcXVlc3QnKSB7XG4gICAqICAgICAgIHJlcS50aW1lb3V0ID0gMzAwMDA7XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqL1xuICBiZWZvcmUobWlkZGxld2FyZSwgYmVmb3JlQWxsID0gdHJ1ZSkge1xuICAgIGNvbnN0IHsgYmVmb3JlIH0gPSB0aGlzLiQkO1xuXG4gICAgaWYgKGJlZm9yZUFsbCkge1xuICAgICAgYmVmb3JlLnVuc2hpZnQobWlkZGxld2FyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJlZm9yZS5wdXNoKG1pZGRsZXdhcmUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2NvbmZpZ1xuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFqYXhlckNvbmZpZ3xBamF4ZXJDb25maWdGdW5jdGlvbn0gW3Byb3BlcnR5XSAtIElmIGl0J3MgYSBmdW5jdGlvblxuICAgKiBpdCdzIGNhbGxlZCB3aXRoIHRoZSBmZXRjaCBjb25maWcgYXJndW1lbnQsIGlmIGl0J3MgYSBzdHJpbmcgdGhlIHZhbHVlIGFyZ3VtZW50XG4gICAqIGlzIHVzZWQgZm9yIGFzc2lnbmluZyB0aGlzIHByb3BlcnR5IHRvIHRoZSBmZXRjaCBjb25maWdcbiAgICogb3RoZXJ3aXNlIGl0J3MgYXNzaWduZWQgdG8gdGhlIGZldGNoIGNvbmZpZy5cbiAgICogQHBhcmFtIHsqfSBbdmFsdWVdIC0gU2VlIHRoZSBwcm9wZXJ0eSBhcmd1bWVudC5cbiAgICogQHJldHVybnMge0FqYXhlcnxBamF4ZXJDb25maWd9IElmIHRoZSBhcmd1bWVudCBpcyBwcmVzZW50IHRoaXMgaXMgcmV0dXJuZWQgb3RoZXJ3aXNlIHRoZSBmZXRjaCBjb25maWcgaXMgcmV0dXJuZWQuXG4gICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgZm9yIGdldHRpbmcgYW5kIHNldHRpbmcgY29uZmlnLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBhamF4ZXIgPSBuZXcgQWpheGVyKCk7XG4gICAqXG4gICAqIGFqYXhlci5jb25maWcoeyBiYXNlVVJMOiA1MDAwIH0pO1xuICAgKiBhamF4ZXIuY29uZmlnKCkudGltZW91dDsgLy8gNTAwMFxuICAgKlxuICAgKiBhamF4ZXIuY29uZmlnKChjb25maWcpID0+IHtcbiAgICogICBjb25maWcuYmFzZVVSTCArPSAnL2FwaSc7XG4gICAqIH0pO1xuICAgKi9cbiAgY29uZmlnKHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuJCQ7XG5cbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24ocHJvcGVydHkpKSB7XG4gICAgICBwcm9wZXJ0eShjb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHByb3BlcnR5ID0geyBbcHJvcGVydHldOiB2YWx1ZSB9O1xuICAgICAgfVxuXG4gICAgICBkZWVwQXNzaWduKGNvbmZpZywgcHJvcGVydHkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2RlbGV0ZVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdXJsXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gW2NvbmZpZ10gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAZGVzY3JpcHRpb24gU2hvcnRoYW5kIGZvciAjcmVxdWVzdCBmb3IgZGVsZXRlIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhamF4ZXIuZGVsZXRlKCcvZGF0YScpLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKi9cbiAgZGVsZXRlKHVybCwgY29uZmlnID0ge30pIHtcbiAgICBpZiAoIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgIGNvbmZpZyA9IHVybDtcbiAgICAgIHVybCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCwgYXNzaWduKHsgbWV0aG9kOiAnZGVsZXRlJyB9LCBjb25maWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNnZXRcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBamF4ZXJSZXNwb25zZSwgRXJyb3I+fSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQGRlc2NyaXB0aW9uIFNob3J0aGFuZCBmb3IgI3JlcXVlc3QgZm9yIGdldCByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLmdldCgnL2RhdGEnKS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICovXG4gIGdldCh1cmwsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKCFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSB1cmw7XG4gICAgICB1cmwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIGFzc2lnbih7IG1ldGhvZDogJ2dldCcgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjaGVhZFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdXJsXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcGFyYW0ge0FqYXhlckNvbmZpZ30gW2NvbmZpZ10gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFqYXhlclJlc3BvbnNlLCBFcnJvcj59IFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAZGVzY3JpcHRpb24gU2hvcnRoYW5kIGZvciAjcmVxdWVzdCBmb3IgaGVhZCByZXF1ZXN0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLmhlYWQoJy9kYXRhJykudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICBoZWFkKHVybCwgY29uZmlnID0ge30pIHtcbiAgICBpZiAoIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgIGNvbmZpZyA9IHVybDtcbiAgICAgIHVybCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCwgYXNzaWduKHsgbWV0aG9kOiAnaGVhZCcgfSwgY29uZmlnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBBamF4ZXIjaGVhZGVyc1xuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdC48U3RyaW5nLCBTdHJpbmc+fSBoZWFkZXIgLSBBIGhlYWRlciBzdHJpbmcgb3IgYW4gb2JqZWN0IG9mIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxuICAgKiB7IFtoZWFkZXJdOiBbdmFsdWUxLCB2YWx1ZTIsIC4uLl0gfS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gLSBIZWFkZXIgdmFsdWUuIElmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBhIHN0cmluZ1xuICAgKiB0aGlzIGhhcyB0byBiZSBhIGhlYWRlciB2YWx1ZS5cbiAgICogQHJldHVybnMge0FqYXhlcn0gUmV0dXJucyB0aGlzLlxuICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIGZvciBzZXR0aW5nIHJlcXVlc3QgaGVhZGVycy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyXG4gICAqICAgLmhlYWRlcnMoJ015LUhlYWRlcicsICdWYWx1ZScpXG4gICAqICAgLmhlYWRlcnMoe1xuICAgKiAgICAgJ015LUFub3RoZXItSGVhZGVyJzogJ1ZhbHVlMidcbiAgICogICB9KTtcbiAgICovXG4gIGhlYWRlcnMoaGVhZGVyLCB2YWx1ZSkge1xuICAgIGNvbnN0IHsgaGVhZGVycyB9ID0gdGhpcy4kJDtcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDIpIHtcbiAgICAgIGhlYWRlciA9IHsgW2hlYWRlcl06IHZhbHVlIH07XG4gICAgfVxuXG4gICAgaXRlcmF0ZShoZWFkZXIsICh2YWx1ZSwgaGVhZGVyKSA9PiB7XG4gICAgICBoZWFkZXJzW2hlYWRlcl0gPSB2YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI2luc3RhbmNlXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gTmV3IGNvbmZpZyBpZiBuZWVkZWQuXG4gICAqIEByZXR1cm5zIHtBamF4ZXJ9IE5ldyBpbnN0YW5jZSBvZiBBamF4ZXIuXG4gICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgZm9yIGNyZWF0aW5nIG5ldyBhamF4ZXIgaW5zdGFuY2VzIGJhc2VkIG9uIGFscmVhZHkgZXhpc3RlbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IG1haW5BamF4ZXIgPSBuZXcgQWpheGVyKHtcbiAgICogICBiYXNlVVJMOiAnLy9vdGhlci5kb21haW4uY29tL2FwaScsXG4gICAqICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAqIH0pO1xuICAgKlxuICAgKiBjb25zdCBsb25nQWpheGVyID0gbWFpbkFqYXhlci5pbnN0YW5jZSh7XG4gICAqICAgdGltZW91dDogMTAwMDBcbiAgICogfSk7XG4gICAqL1xuICBpbnN0YW5jZShjb25maWcgPSB7fSkge1xuICAgIGNvbnN0IGRhdGFDb25maWcgPSBoYXNPd24oY29uZmlnLCAnZGF0YScpXG4gICAgICA/IHsgZGF0YTogY29uZmlnLmRhdGEgfVxuICAgICAgOiB7fTtcblxuICAgIGRlbGV0ZSBjb25maWcuZGF0YTtcblxuICAgIGNvbnN0IGNvbmYgPSBhc3NpZ24oXG4gICAgICBkZWVwQXNzaWduKHt9LCB0aGlzLiQkLCBjb25maWcpLFxuICAgICAgZGF0YUNvbmZpZ1xuICAgICk7XG5cbiAgICByZXR1cm4gbmV3IEFqYXhlcihjb25mKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNwYXRjaFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdXJsXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcGFyYW0geyp9IFtkYXRhXSAtIEFkZGl0aW9uYWwgcGFyYW1ldGVyIGZvciB1cGxvYWRpbmcgZGF0YS5cbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBamF4ZXJSZXNwb25zZSwgRXJyb3I+fSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQGRlc2NyaXB0aW9uIFNob3J0aGFuZCBmb3IgI3JlcXVlc3QgZm9yIGhlYWQgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGFqYXhlci5wYXRjaCgnL2RhdGEnLCB7IHVzZXI6ICdKb2huJyB9KS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICovXG4gIHBhdGNoKHVybCwgZGF0YSA9IHt9LCBjb25maWcgPSB7fSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmICFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSBkYXRhO1xuICAgICAgZGF0YSA9IHVybDtcbiAgICAgIHVybCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCwgYXNzaWduKHsgbWV0aG9kOiAncGF0Y2gnLCBkYXRhIH0sIGNvbmZpZykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgQWpheGVyI3Bvc3RcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHsqfSBbZGF0YV0gLSBBZGRpdGlvbmFsIHBhcmFtZXRlciBmb3IgdXBsb2FkaW5nIGRhdGEuXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QWpheGVyUmVzcG9uc2UsIEVycm9yPn0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBkZXNjcmlwdGlvbiBTaG9ydGhhbmQgZm9yICNyZXF1ZXN0IGZvciBoZWFkIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhamF4ZXIucG9zdCgnL2RhdGEnLCB7IHVzZXI6ICdKb2huJyB9KS50aGVuKChyZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhyZXMpO1xuICAgKiB9KTtcbiAgICovXG4gIHBvc3QodXJsLCBkYXRhID0ge30sIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggJiYgIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgIGNvbmZpZyA9IGRhdGE7XG4gICAgICBkYXRhID0gdXJsO1xuICAgICAgdXJsID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXJsLCBhc3NpZ24oeyBtZXRob2Q6ICdwb3N0JywgZGF0YSB9LCBjb25maWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNwdXRcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW3VybF0gLSBTZWUge0BsaW5rIEFqYXhlciNyZXF1ZXN0fS5cbiAgICogQHBhcmFtIHsqfSBbZGF0YV0gLSBBZGRpdGlvbmFsIHBhcmFtZXRlciBmb3IgdXBsb2FkaW5nIGRhdGEuXG4gICAqIEBwYXJhbSB7QWpheGVyQ29uZmlnfSBbY29uZmlnXSAtIFNlZSB7QGxpbmsgQWpheGVyI3JlcXVlc3R9LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QWpheGVyUmVzcG9uc2UsIEVycm9yPn0gU2VlIHtAbGluayBBamF4ZXIjcmVxdWVzdH0uXG4gICAqIEBkZXNjcmlwdGlvbiBTaG9ydGhhbmQgZm9yICNyZXF1ZXN0IGZvciBoZWFkIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhamF4ZXIucHV0KCcvZGF0YScsIHsgdXNlcjogJ0pvaG4nIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKi9cbiAgcHV0KHVybCwgZGF0YSA9IHt9LCBjb25maWcgPSB7fSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmICFpc1N0cmluZyh1cmwpKSB7XG4gICAgICBjb25maWcgPSBkYXRhO1xuICAgICAgZGF0YSA9IHVybDtcbiAgICAgIHVybCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCwgYXNzaWduKHsgbWV0aG9kOiAncHV0JywgZGF0YSB9LCBjb25maWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIEFqYXhlciNyZXF1ZXN0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt1cmxdIC0gVVJMIGZvciB0aGUgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtBamF4ZXJDb25maWd9IFtjb25maWddIC0gQWRkaXRpb25hbCBjb25maWcgZm9yIHRoaXMgcGFydGljdWxhciByZXF1ZXN0LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QWpheGVyUmVzcG9uc2UsIEVycm9yPn0gUHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIHJlcXVlc3QgcmVzcG9uc2UuXG4gICAqIEBkZXNjcmlwdGlvbiBNYWluIGZ1bmN0aW9uIGZvciBtYWtpbmcgcmVxdWVzdHMuIEFsbCByZXF1ZXN0IG1ldGhvZHMgY2FsbCB0aGlzIG1ldGhvZFxuICAgKiBpbmNsdWRpbmcgdGhlIGZldGNoIGluc3RhbmNlIGl0c2VsZi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYWpheGVyLnJlcXVlc3QoJy9kYXRhJywgeyB0aW1lb3V0OiAxMDAwIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAqIH0pO1xuICAgKlxuICAgKiBhamF4ZXIucmVxdWVzdCh7IHRpbWVvdXQ6IDEwMDAgfSkudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqXG4gICAqIGFqYXhlci5yZXF1ZXN0KCkudGhlbigocmVzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocmVzKTtcbiAgICogfSk7XG4gICAqL1xuICByZXF1ZXN0KHVybCwgY29uZmlnID0ge30pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiAhaXNTdHJpbmcodXJsKSkge1xuICAgICAgY29uZmlnID0gdXJsO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGFDb25maWcgPSBoYXNPd24oY29uZmlnLCAnZGF0YScpXG4gICAgICA/IHsgZGF0YTogY29uZmlnLmRhdGEgfVxuICAgICAgOiB7fTtcbiAgICBjb25zdCB1cmxDb25maWcgPSBpc1N0cmluZyh1cmwpXG4gICAgICA/IHsgdXJsIH1cbiAgICAgIDoge307XG5cbiAgICBkZWxldGUgY29uZmlnLmRhdGE7XG5cbiAgICBjb25zdCBjb25mID0gYXNzaWduKFxuICAgICAgZGVlcEFzc2lnbihcbiAgICAgICAgZGVlcENsb25lKHRoaXMuJCQpLFxuICAgICAgICB1cmxDb25maWcsXG4gICAgICAgIGNvbmZpZ1xuICAgICAgKSxcbiAgICAgIGRhdGFDb25maWdcbiAgICApO1xuXG4gICAgbGV0IHhocjtcbiAgICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgaXRlcmF0ZShjb25mLmJlZm9yZSwgKG1pZGRsZXdhcmUpID0+IHtcbiAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAobWlkZGxld2FyZS5sZW5ndGggPj0gMikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIHJlc29sdmUobWlkZGxld2FyZShjb25mKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICBpZiAobWlkZGxld2FyZS5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICByZXNvbHZlKG1pZGRsZXdhcmUoZXJyLCBjb25mKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgYWZ0ZXIsXG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICBwYXNzd29yZFxuICAgICAgICB9LFxuICAgICAgICBkYXRhLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBtZXRob2QsXG4gICAgICAgIG9ucHJvZ3Jlc3MsXG4gICAgICAgIHJlc3BvbnNlVHlwZSxcbiAgICAgICAgdGltZW91dCxcbiAgICAgICAgdXJsLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHNcbiAgICAgIH0gPSBjb25mO1xuXG4gICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUsIHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgIGl0ZXJhdGUoaGVhZGVycywgKHZhbHVlLCBoZWFkZXIpID0+IHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLCB2YWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKG9ucHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKHVwbG9hZE1ldGhvZHMuaW5kZXhPZihtZXRob2QpID09PSAtMSkge1xuICAgICAgICAgIHhoci5vbnByb2dyZXNzID0gb25wcm9ncmVzcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBvbnByb2dyZXNzO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHhoci5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignUmVxdWVzdCB3YXMgYWJvcnRlZCcpO1xuXG4gICAgICAgIGVycm9yLnR5cGUgPSAnQUJPUlRfRVJST1InO1xuXG4gICAgICAgIHJlamVjdChlcnJvcik7XG5cbiAgICAgICAgeGhyID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpO1xuXG4gICAgICAgIGVycm9yLnR5cGUgPSAnTkVUV09SS19FUlJPUic7XG5cbiAgICAgICAgcmVqZWN0KGVycm9yKTtcblxuICAgICAgICB4aHIgPSBudWxsO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9udGltZW91dCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1JlcXVlc3QgdGltZSBleGNlZWRlZCcpO1xuXG4gICAgICAgIGVycm9yLnR5cGUgPSAnVElNRU9VVF9FUlJPUic7XG5cbiAgICAgICAgcmVqZWN0KGVycm9yKTtcblxuICAgICAgICB4aHIgPSBudWxsO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF4aHIgfHwgIXhoci5zdGF0dXMgfHwgeGhyLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICBjb25maWc6IGNvbmYsXG4gICAgICAgICAgZGF0YTogIXJlc3BvbnNlVHlwZSB8fCByZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHhoci5yZXNwb25zZVRleHQgOiB4aHIucmVzcG9uc2UsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSksXG4gICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzID09PSAxMjIzID8gMjA0IDogeGhyLnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzID09PSAxMjIzID8gJ05vIENvbnRlbnQnIDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgeGhyXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICBpdGVyYXRlKGFmdGVyLCAobWlkZGxld2FyZSkgPT4ge1xuICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1pZGRsZXdhcmUubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShtaWRkbGV3YXJlKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAobWlkZGxld2FyZS5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShtaWRkbGV3YXJlKGVyciwgcmVzcG9uc2UpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXNvbHZlKHByb21pc2VcbiAgICAgICAgICAudGhlbigoKSA9PiByZXNwb25zZSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZXJyLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgICAgeGhyLnRpbWVvdXQgPSArdGltZW91dCB8fCAwO1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9ICEhd2l0aENyZWRlbnRpYWxzO1xuXG4gICAgICB4aHIuc2VuZChkYXRhKTtcbiAgICB9KSk7XG5cbiAgICBwcm9taXNlLmFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICBpZiAoeGhyKSB7XG4gICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmV0Y2hCZWZvcmVNaWRkbGV3YXJlKGNvbmZpZykge1xuICBjb25zdCB7XG4gICAgYmFzZVVSTCxcbiAgICBkYXRhLFxuICAgIGhlYWRlcnMsXG4gICAgbWV0aG9kLFxuICAgIHBhcmFtcyxcbiAgICBxdWVyeSxcbiAgICB1cmxcbiAgfSA9IGNvbmZpZztcbiAgY29uc3QgTUVUSE9EID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG5cbiAgY29uZmlnLm1ldGhvZCA9IE1FVEhPRDtcbiAgY29uZmlnLnVybCA9IGNvbnN0cnVjdFVSTChiYXNlVVJMLCB1cmwsIHBhcmFtcywgcXVlcnkpO1xuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoZGF0YSwgTUVUSE9ELCBoZWFkZXJzKTtcbn1cblxuLyoqXG4gKiBAY29uc3Qge0FqYXhlcn0gZmV0Y2hcbiAqIEB0eXBlIHtBamF4ZXJ9XG4gKiBAcHVibGljXG4gKiBAZGVzY3JpcHRpb24gRW1wdHkgaW5zdGFuY2Ugb2YgQWpheGVyLlxuICovXG5jb25zdCBmZXRjaCA9IG5ldyBBamF4ZXIoKTtcblxuZXhwb3J0IGRlZmF1bHQgQWpheGVyO1xuZXhwb3J0IHsgQWpheGVyLCBmZXRjaCB9O1xuIiwiaW1wb3J0IEFqYXhlciBmcm9tICcuL2xpYi9BamF4ZXInO1xuXG53aW5kb3cuQWpheGVyID0gQWpheGVyO1xuIl0sIm5hbWVzIjpbImhhc093blByb3BlcnR5IiwidG9TdHJpbmciLCJ3aGl0ZVNwYWNlIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsImNhbGwiLCJzbGljZSIsImlzQXJyYXkiLCJBcnJheSIsImlzRnVuY3Rpb24iLCJpc09iamVjdCIsImlzUHJpbWl0aXZlIiwidGVzdCIsImlzU3RyaW5nIiwiYXNzaWduIiwidGFyZ2V0Iiwib2JqZWN0cyIsInNvdXJjZSIsImtleSIsIml0ZXJhdGUiLCJvYmplY3QiLCJjYWxsYmFjayIsImFycmF5IiwiaXRlcmF0ZWQiLCJsZW5ndGgiLCJtYXAiLCJuZXdPYmplY3QiLCJ0cmltIiwic3RyaW5nIiwicmVwbGFjZSIsInJlcGxhY2VTdHJpbmciLCJzdHJpbmdUb1JlcGxhY2UiLCJyZXBsYWNlbWVudCIsInNwbGl0Iiwiam9pbiIsImRlZXBDbG9uZSIsImNsb25lIiwiZGVlcEFzc2lnbiIsImhhc093biIsInByb3BlcnR5IiwiYWJzb2x1dGVVUkxSZWdleHAiLCJlbXB0eUFycmF5IiwiYmFzZVVSTCIsInVybCIsInBhcmFtcyIsInF1ZXJ5IiwiVVJMIiwiaXNBYnNvbHV0ZSIsIlN0cmluZyIsInBhcmFtIiwiZW5jb2RlIiwicXVlcnlQYXJhbXMiLCJxdWVyeVN3aXRjaGVyIiwicHJlZml4IiwiaW5kZXhPZiIsInBvc3RmaXgiLCJlbmNvZGVVUklDb21wb25lbnQiLCJwdXNoIiwicmF3SGVhZGVycyIsImhlYWRlcnMiLCJpbmRleCIsInN1YnN0cmluZyIsInZhbCIsIm5vdFRvVHJhbnNmb3JtIiwid2l0aG91dEJvZHkiLCJkYXRhIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlZmF1bHRzIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJ1cGxvYWRNZXRob2RzIiwiUHJvbWlzZSIsIkFqYXhlciIsIlByb21pc2VDbGFzcyIsImNvbmZpZyIsImFqYXhlciIsInJlcXVlc3QiLCJhcHBseSIsImFyZ3VtZW50cyIsImNvbmYiLCJiZWZvcmUiLCJmZXRjaEJlZm9yZU1pZGRsZXdhcmUiLCJkZWZpbmVQcm9wZXJ0eSIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwibWlkZGxld2FyZSIsImFmdGVyQWxsIiwiYWZ0ZXIiLCIkJCIsInVuc2hpZnQiLCJiZWZvcmVBbGwiLCJ1bmRlZmluZWQiLCJoZWFkZXIiLCJkYXRhQ29uZmlnIiwidXJsQ29uZmlnIiwieGhyIiwicHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiZXJyIiwicmVqZWN0IiwiYXV0aCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJvbnByb2dyZXNzIiwicmVzcG9uc2VUeXBlIiwidGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJ1cGxvYWQiLCJvbmFib3J0IiwiZXJyb3IiLCJFcnJvciIsInR5cGUiLCJvbmVycm9yIiwib250aW1lb3V0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwic3RhdHVzIiwicmVhZHlTdGF0ZSIsInJlc3BvbnNlIiwicmVzcG9uc2VUZXh0IiwicGFyc2VIZWFkZXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwic3RhdHVzVGV4dCIsImNhdGNoIiwiZSIsInNlbmQiLCJhYm9ydCIsIkZ1bmN0aW9uIiwiTUVUSE9EIiwidG9VcHBlckNhc2UiLCJjb25zdHJ1Y3RVUkwiLCJ0cmFuc2Zvcm1EYXRhIiwiZmV0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztXQUdJO0lB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"}